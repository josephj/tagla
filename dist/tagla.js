(function() {
  var Tagla, proto,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __hasProp = {}.hasOwnProperty;

  Tagla = (function(_super) {
    __extends(Tagla, _super);

    function Tagla($wrapper, options) {
      if (options == null) {
        options = {};
      }
      this.wrapper = $($wrapper);
      this.init(options);
      this.bind();
    }

    return Tagla;

  })(Stackla.Base);

  Tagla.NAME = 'Tagla';

  Tagla.PREFIX = 'tagla-';

  Tagla.FORM_TEMPLATE = ['<form class="tagla-form">', '    <input type="hidden" name="x">', '    <input type="hidden" name="y">', '    <select data-placeholder="Search" type="text" name="label" class="tagla-select chosen-select" placeholder="Search">', '        <option>Frankie Issue #6</option>', '        <option>Frankie Wall Calendar 2015</option>', '        <option>Frankie A5 Daily Planner</option>', '    </select>', '</form>'].join('\n');

  Tagla.TAG_TEMPLATE = ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">', '      {{label}}', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-edit-link">', '        <i class="fs fs-pencil"></i> Edit', '      </a>', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-delete-link">', '        <i class="fs fs-cross3"></i> Delete', '      </a>', '    </span>', '    <div class="tagla-dialog">', '        {{#image}}', '        <div class="tagla-dialog-image">', '          <img src="{{image}}">', '        </div>', '        {{/image}}', '        <div class="tagla-dialog-text">', '          <h2 class="tagla-dialog-title">{{label}}</h2>', '          <div class="tagla-dialog-price">{{price}}</div>', '          <p class="tagla-dialog-description">{{description}}</p>', '          <a href="{{url}}" class="tagla-dialog-button st-btn st-btn-success st-btn-solid">', '            <i class="fs fs-cart"></i>', '            Buy Now', '          </a>', '        </div>', '    </div>', "    " + Tagla.FORM_TEMPLATE, '</div>'].join('\n');

  Tagla.NEW_TAG_TEMPLATE = ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">{{label}}</span>', '</div>'].join('\n');

  Tagla.DRAG_ATTR = {
    containment: '.tagla',
    handle: '.tagla-icon'
  };

  Tagla.SELECT_ATTR = {
    placeholder_text_single: 'Select an option',
    width: '310px'
  };

  proto = {
    formatFloat: function(num, pos) {
      var size;
      size = Math.pow(10, pos);
      return Math.round(num * size) / size;
    },
    toString: function() {
      return 'Tagla';
    },
    _applyTools: function($tag) {
      var drag;
      drag = new Draggabilly($tag[0], Tagla.DRAG_ATTR);
      drag.disable();
      $tag.data('draggabilly', drag);
      return $tag.find('.tagla-select').chosen(Tagla.SELECT_ATTR);
    },
    _removeTools: function($tag) {
      var $select;
      $tag.data('draggabilly').destroy();
      $select = $tag.find('.tagla-select');
      $select.show().removeClass('chzn-done');
      return $select.next().remove();
    },
    updateImageSize: function() {
      var image;
      this.log('updateImageSize() is executed');
      image = this.image[0];
      this.currentWidth = image.width;
      this.currentHeight = image.height;
      this.widthRatio = this.currentWidth / this.naturalWidth;
      return this.heightRatio = this.currentHeight / this.naturalHeight;
    },
    handleImageError: function(e) {
      this.log('handleImageError() is executed');
      this.imageLoaded = false;
      return this.destroy();
    },
    handleImageLoad: function(e) {
      this.log('handleImageLoad() is executed');
      this.imageLoaded = true;
      this.naturalWidth = this.image[0].width;
      this.naturalHeight = this.image[0].height;
      this.updateImageSize();
      return this.render();
    },
    handleTagClick: function(e) {
      var $tag;
      this.log('handleTagClick() is executed');
      e.preventDefault();
      e.stopPropagation();
      $tag = $(e.currentTarget);
      $('.tagla-tag').each(function() {
        if (this !== $tag[0]) {
          $(this).removeClass('tagla-tag-active');
          $(this).removeClass('tagla-tag-choose');
          return $(this).data('draggabilly').disable();
        }
      });
      $tag.addClass('tagla-tag-active');
      return $tag.data('draggabilly').enable();
    },
    handleTagDelete: function(e) {
      var $tag, instance;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.remove();
      instance = $tag.data('draggabilly');
      if (instance) {
        instance.destroy();
      }
      return $(document).trigger('tagla:delete', $tag.data('tag-data'));
    },
    handleTagEdit: function(e) {
      var $tag;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.addClass('tagla-tag-choose');
      $tag.find('.tagla-select').trigger('chosen:open');
      $tag.find('.tagla-select').on('change', function(e) {
        return $tag.removeClass('tagla-tag-choose tagla-tag-active');
      });
      return $(document).trigger('tagla:edit', $tag.data('tag-data'));
    },
    handleWrapperClick: function(e) {
      this.log('handleWrapperClick() is executed');
      return $('.tagla-tag').each(function() {
        $(this).removeClass('tagla-tag-active');
        return $(this).data('draggabilly').disable();
      });
    },
    handleWindowResize: function(e) {
      var image;
      this.log('handleImageResize() is executed');
      image = this.image[0];
      if (image.width === this.currentWidth && image.height === this.currentHeight) {
        return;
      }
      $('.tagla-tag').each((function(_this) {
        return function(i, el) {
          var $tag, pos, x, y;
          $tag = $(el);
          pos = $tag.position();
          x = (pos.left / _this.currentWidth) * _this.image.width();
          y = (pos.top / _this.currentHeight) * _this.image.height();
          return $tag.css({
            left: x + "px",
            top: y + "px"
          });
        };
      })(this));
      return this.updateImageSize();
    },
    addTag: function(tag) {
      var $tag, offsetX, offsetY, x, y;
      this.log('addTag() is executed');
      $tag = $(Mustache.render(this.tagTemplate, tag));
      this.wrapper.append($tag);
      tag.x = tag.x || 50;
      tag.y = tag.y || 50;
      x = this.wrapper.width() * (tag.x / 100);
      y = this.wrapper.height() * (tag.y / 100);
      offsetX = $tag.outerWidth() / 2;
      offsetY = $tag.outerHeight() / 2;
      $tag.css({
        left: (x - offsetX) + "px",
        top: (y - offsetY) + "px"
      });
      $tag.data('tag-data', tag);
      if (this.editor) {
        return this._applyTools($tag);
      }
    },
    deleteTag: function($tag) {
      return this.log('deleteTag() is executed');
    },
    edit: function() {
      if (this.editor === true) {
        return;
      }
      this.log('edit() is executed');
      this.wrapper.addClass('tagla-editing');
      $('.tagla-tag').each(function() {
        return this._applyTools($(this));
      });
      return this.editor = true;
    },
    unedit: function() {
      if (this.edit === false) {
        return;
      }
      this.log('unedit() is executed');
      $('.tagla-tag').each(function() {
        return this._removeTools($(this));
      });
      this.wrapper.removeClass('tagla-editing');
      return this.editor = false;
    },
    init: function(options) {
      var _ref;
      this.data = options.data || [];
      this.editor = (_ref = options.editor === true) != null ? _ref : {
        on: false
      };
      this.form = options.form ? $(options.form) : Tagla.FORM_TEMPLATE;
      this.tagTemplate = options.tagTemplate ? $(options.tagTemplate).html() : Tagla.TAG_TEMPLATE;
      this.debug = true;
      this.image = this.wrapper.find('img');
      this.imageLoaded = this.image[0].complete;
      this.currentWidth = this.image[0].width;
      return this.currentHeight = this.image[0].height;
    },
    bind: function() {
      this.log('bind() is executed');
      this.wrapper.on('mouseenter', $.proxy(this.handleMouseEnter, this)).on('click', $.proxy(this.handleWrapperClick, this)).on('click', '.tagla-tag', $.proxy(this.handleTagClick, this)).on('click', '.tagla-tag-edit-link', $.proxy(this.handleTagEdit, this)).on('click', '.tagla-tag-delete-link', $.proxy(this.handleTagDelete, this));
      return $(window).resize($.proxy(this.handleWindowResize, this));
    },
    render: function() {
      var img, tag, _i, _len, _ref, _results;
      if (!this.imageLoaded) {
        img = new Image();
        img.src = this.image.attr('src');
        $(img).one('load', $.proxy(this.handleImageLoad, this)).one('error', $.proxy(this.handleImageError, this));
        return;
      }
      this.log('render() is executed');
      this.wrapper.addClass('tagla');
      if (this.editor) {
        this.wrapper.addClass('tagla-editing');
      }
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        tag = _ref[_i];
        _results.push(this.addTag(tag));
      }
      return _results;
    },
    destroy: function() {
      return this.log('destroy() is executed');
    }
  };

  $.extend(Tagla.prototype, proto);

  if (!window.Stackla) {
    window.Stackla = {};
  }

  window.Stackla.Tagla = Tagla;


  /*
        @wrapper.find('.tagla-select').each ->
          $(@).chosen
            placeholder_text_single: "Select an option"
            width: '310px'
          chosen = $(@).chosen().data('chosen')
          autoClose = false
          chosen_resultSelect_fn = chosen.result_select
          chosen.search_contains = true
          chosen.result_select = (evt) ->
            resultHighlight = null
            unless autoClose
              evt['metaKey'] = true
              evt['ctrlKey'] = true
              resultHighlight = chosen.result_highlight
            stext = chosen.get_search_text()
            result = chosen_resultSelect_fn.call(chosen, evt)
  
            if autoClose is off && resultHighlight != null
              resultHighlight.addClass('result-selected')
  
            @search_field.val(stext)
            @winnow_results()
            @search_field_scale()
            result
   */

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QUQsQ0FBTSxzQkFBTixDQVJBLENBQUE7QUFBQSxNQVNBLElBQUMsQ0FBQSxPQUFPLENBQUMsUUFBVCxDQUFtQixPQUFuQixDQVRBLENBQUE7QUFVQSxNQUFBLElBQXFDLElBQUMsQ0FBQSxNQUF0QztBQUFBLFFBQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxRQUFULENBQW1CLGVBQW5CLENBQUEsQ0FBQTtPQVZBO0FBV0E7QUFBQTtXQUFBLDJDQUFBO3VCQUFBO0FBQUEsc0JBQUEsSUFBQyxDQUFBLE1BQUQsQ0FBUSxHQUFSLEVBQUEsQ0FBQTtBQUFBO3NCQWJNO0lBQUEsQ0F6S1I7QUFBQSxJQXdMQSxPQUFBLEVBQVMsU0FBQSxHQUFBO2FBQ1AsSUFBQyxDQUFBLEdBQUQsQ0FBTSx1QkFBTixFQURPO0lBQUEsQ0F4TFQ7R0FuRUYsQ0FBQTs7QUFBQSxFQThQQSxDQUFDLENBQUMsTUFBRixDQUFTLEtBQUssQ0FBQSxTQUFkLEVBQWtCLEtBQWxCLENBOVBBLENBQUE7O0FBZ1FBLEVBQUEsSUFBQSxDQUFBLE1BQWlDLENBQUMsT0FBbEM7QUFBQSxJQUFBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLEVBQWpCLENBQUE7R0FoUUE7O0FBQUEsRUFpUUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFmLEdBQXVCLEtBalF2QixDQUFBOztBQW9RQTtBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBcFFBO0FBQUEiLCJmaWxlIjoidGFnbGEuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBUYWdsYSBleHRlbmRzIFN0YWNrbGEuQmFzZVxuICBjb25zdHJ1Y3RvcjogKCR3cmFwcGVyLCBvcHRpb25zID0ge30pIC0+XG4gICAgQHdyYXBwZXIgPSAkKCR3cmFwcGVyKVxuICAgIEBpbml0KG9wdGlvbnMpXG4gICAgQGJpbmQoKVxuXG5UYWdsYS5OQU1FID0gJ1RhZ2xhJ1xuVGFnbGEuUFJFRklYID0gJ3RhZ2xhLSdcblRhZ2xhLkZPUk1fVEVNUExBVEUgPSBbXG4gICc8Zm9ybSBjbGFzcz1cInRhZ2xhLWZvcm1cIj4nXG4gICcgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwieFwiPidcbiAgJyAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ5XCI+J1xuICAnICAgIDxzZWxlY3QgZGF0YS1wbGFjZWhvbGRlcj1cIlNlYXJjaFwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImxhYmVsXCIgY2xhc3M9XCJ0YWdsYS1zZWxlY3QgY2hvc2VuLXNlbGVjdFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCI+J1xuICAnICAgICAgICA8b3B0aW9uPkZyYW5raWUgSXNzdWUgIzY8L29wdGlvbj4nXG4gICcgICAgICAgIDxvcHRpb24+RnJhbmtpZSBXYWxsIENhbGVuZGFyIDIwMTU8L29wdGlvbj4nXG4gICcgICAgICAgIDxvcHRpb24+RnJhbmtpZSBBNSBEYWlseSBQbGFubmVyPC9vcHRpb24+J1xuICAnICAgIDwvc2VsZWN0PidcbiAgJzwvZm9ybT4nXG5dLmpvaW4oJ1xcbicpXG5UYWdsYS5UQUdfVEVNUExBVEUgPSBbXG4gICc8ZGl2IGNsYXNzPVwidGFnbGEtdGFnXCI+J1xuICAnICAgIDxpIGNsYXNzPVwidGFnbGEtaWNvbiBmcyBmcy10YWdcIj48L2k+J1xuICAnICAgIDxzcGFuIGNsYXNzPVwidGFnbGEtbGFiZWxcIj4nXG4gICcgICAgICB7e2xhYmVsfX0nXG4gICcgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgY2xhc3M9XCJ0YWdsYS10YWctbGluayB0YWdsYS10YWctZWRpdC1saW5rXCI+J1xuICAnICAgICAgICA8aSBjbGFzcz1cImZzIGZzLXBlbmNpbFwiPjwvaT4gRWRpdCdcbiAgJyAgICAgIDwvYT4nXG4gICcgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgY2xhc3M9XCJ0YWdsYS10YWctbGluayB0YWdsYS10YWctZGVsZXRlLWxpbmtcIj4nXG4gICcgICAgICAgIDxpIGNsYXNzPVwiZnMgZnMtY3Jvc3MzXCI+PC9pPiBEZWxldGUnXG4gICcgICAgICA8L2E+J1xuICAnICAgIDwvc3Bhbj4nXG4gICcgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWRpYWxvZ1wiPidcbiAgJyAgICAgICAge3sjaW1hZ2V9fSdcbiAgJyAgICAgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWRpYWxvZy1pbWFnZVwiPidcbiAgJyAgICAgICAgICA8aW1nIHNyYz1cInt7aW1hZ2V9fVwiPidcbiAgJyAgICAgICAgPC9kaXY+J1xuICAnICAgICAgICB7ey9pbWFnZX19J1xuICAnICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLXRleHRcIj4nXG4gICcgICAgICAgICAgPGgyIGNsYXNzPVwidGFnbGEtZGlhbG9nLXRpdGxlXCI+e3tsYWJlbH19PC9oMj4nXG4gICcgICAgICAgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWRpYWxvZy1wcmljZVwiPnt7cHJpY2V9fTwvZGl2PidcbiAgJyAgICAgICAgICA8cCBjbGFzcz1cInRhZ2xhLWRpYWxvZy1kZXNjcmlwdGlvblwiPnt7ZGVzY3JpcHRpb259fTwvcD4nXG4gICcgICAgICAgICAgPGEgaHJlZj1cInt7dXJsfX1cIiBjbGFzcz1cInRhZ2xhLWRpYWxvZy1idXR0b24gc3QtYnRuIHN0LWJ0bi1zdWNjZXNzIHN0LWJ0bi1zb2xpZFwiPidcbiAgJyAgICAgICAgICAgIDxpIGNsYXNzPVwiZnMgZnMtY2FydFwiPjwvaT4nXG4gICcgICAgICAgICAgICBCdXkgTm93J1xuICAnICAgICAgICAgIDwvYT4nXG4gICcgICAgICAgIDwvZGl2PidcbiAgJyAgICA8L2Rpdj4nXG4gIFwiICAgICN7VGFnbGEuRk9STV9URU1QTEFURX1cIlxuICAnPC9kaXY+J1xuXS5qb2luKCdcXG4nKVxuVGFnbGEuTkVXX1RBR19URU1QTEFURSA9IFtcbiAgJzxkaXYgY2xhc3M9XCJ0YWdsYS10YWdcIj4nXG4gICcgICAgPGkgY2xhc3M9XCJ0YWdsYS1pY29uIGZzIGZzLXRhZ1wiPjwvaT4nXG4gICcgICAgPHNwYW4gY2xhc3M9XCJ0YWdsYS1sYWJlbFwiPnt7bGFiZWx9fTwvc3Bhbj4nXG4gICc8L2Rpdj4nXG5dLmpvaW4oJ1xcbicpXG5UYWdsYS5EUkFHX0FUVFIgPVxuICBjb250YWlubWVudDogJy50YWdsYSdcbiAgaGFuZGxlOiAnLnRhZ2xhLWljb24nXG5UYWdsYS5TRUxFQ1RfQVRUUiA9XG4gIHBsYWNlaG9sZGVyX3RleHRfc2luZ2xlOiAnU2VsZWN0IGFuIG9wdGlvbidcbiAgd2lkdGg6ICczMTBweCdcblxucHJvdG8gPVxuICAjIyMjIyMjIyMjIyMjI1xuICAjIFV0aWxpdGllc1xuICAjIyMjIyMjIyMjIyMjI1xuICBmb3JtYXRGbG9hdDogKG51bSwgcG9zKSAtPlxuICAgIHNpemUgPSBNYXRoLnBvdygxMCwgcG9zKVxuICAgIE1hdGgucm91bmQobnVtICogc2l6ZSkgLyBzaXplXG4gIHRvU3RyaW5nOiAtPiAnVGFnbGEnXG5cbiAgIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgUHJpdmF0ZSBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIEluaXRpYWxpemUgZHJhZyBhbmQgc2VsZWN0IGxpYnMgZm9yIGEgc2luZ2xlIHRhZ1xuICBfYXBwbHlUb29sczogKCR0YWcpIC0+XG4gICAgZHJhZyA9IG5ldyBEcmFnZ2FiaWxseSgkdGFnWzBdLCBUYWdsYS5EUkFHX0FUVFIpXG4gICAgZHJhZy5kaXNhYmxlKClcbiAgICAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JywgZHJhZylcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKS5jaG9zZW4oVGFnbGEuU0VMRUNUX0FUVFIpXG4gIF9yZW1vdmVUb29sczogKCR0YWcpIC0+XG4gICAgJHRhZy5kYXRhKCdkcmFnZ2FiaWxseScpLmRlc3Ryb3koKVxuICAgICRzZWxlY3QgPSAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKVxuICAgICRzZWxlY3Quc2hvdygpLnJlbW92ZUNsYXNzICdjaHpuLWRvbmUnXG4gICAgJHNlbGVjdC5uZXh0KCkucmVtb3ZlKClcblxuICAjIyMjIyMjIyMjIyMjIyMjIyNcbiAgIyBQdWJsaWMgTWVodG9kc1xuICAjIyMjIyMjIyMjIyMjIyMjIyNcbiAgdXBkYXRlSW1hZ2VTaXplOiAtPlxuICAgIEBsb2cgJ3VwZGF0ZUltYWdlU2l6ZSgpIGlzIGV4ZWN1dGVkJ1xuICAgIGltYWdlID0gQGltYWdlWzBdXG4gICAgQGN1cnJlbnRXaWR0aCA9IGltYWdlLndpZHRoXG4gICAgQGN1cnJlbnRIZWlnaHQgPSBpbWFnZS5oZWlnaHRcbiAgICBAd2lkdGhSYXRpbyA9IEBjdXJyZW50V2lkdGggLyBAbmF0dXJhbFdpZHRoXG4gICAgQGhlaWdodFJhdGlvID0gQGN1cnJlbnRIZWlnaHQgLyBAbmF0dXJhbEhlaWdodFxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgRXZlbnQgSGFuZGxlcnNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgaGFuZGxlSW1hZ2VFcnJvcjogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VFcnJvcigpIGlzIGV4ZWN1dGVkJ1xuICAgIEBpbWFnZUxvYWRlZCA9IGZhbHNlXG4gICAgQGRlc3Ryb3koKVxuXG4gIGhhbmRsZUltYWdlTG9hZDogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VMb2FkKCkgaXMgZXhlY3V0ZWQnXG4gICAgQGltYWdlTG9hZGVkID0gdHJ1ZVxuICAgIEBuYXR1cmFsV2lkdGggPSBAaW1hZ2VbMF0ud2lkdGhcbiAgICBAbmF0dXJhbEhlaWdodCA9IEBpbWFnZVswXS5oZWlnaHRcbiAgICBAdXBkYXRlSW1hZ2VTaXplKClcbiAgICBAcmVuZGVyKClcblxuICBoYW5kbGVUYWdDbGljazogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KVxuICAgICQoJy50YWdsYS10YWcnKS5lYWNoIC0+XG4gICAgICBpZiBAIGlzbnQgJHRhZ1swXVxuICAgICAgICAkKEApLnJlbW92ZUNsYXNzKCd0YWdsYS10YWctYWN0aXZlJylcbiAgICAgICAgJChAKS5yZW1vdmVDbGFzcygndGFnbGEtdGFnLWNob29zZScpXG4gICAgICAgICQoQCkuZGF0YSgnZHJhZ2dhYmlsbHknKS5kaXNhYmxlKClcbiAgICAgICAgIyQoQCkuZmluZCgnLnRhZ2xhLXNlbGVjdCcpLnRyaWdnZXIoJ2Nob3NlbjpvcGVuJylcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctYWN0aXZlJylcbiAgICAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JykuZW5hYmxlKClcblxuICBoYW5kbGVUYWdEZWxldGU6IChlKSAtPlxuICAgIEBsb2cgJ2hhbmRsZVRhZ0RlbGV0ZSgpIGlzIGV4ZWN1dGVkJ1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICR0YWcgPSAkKGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnRhZ2xhLXRhZycpXG4gICAgJHRhZy5yZW1vdmUoKVxuICAgIGluc3RhbmNlID0gJHRhZy5kYXRhKCdkcmFnZ2FiaWxseScpXG4gICAgaW5zdGFuY2UuZGVzdHJveSgpIGlmIChpbnN0YW5jZSlcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCd0YWdsYTpkZWxldGUnLCAkdGFnLmRhdGEoJ3RhZy1kYXRhJykpXG5cbiAgaGFuZGxlVGFnRWRpdDogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnRGVsZXRlKCkgaXMgZXhlY3V0ZWQnXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKS50cmlnZ2VyKCdjaG9zZW46b3BlbicpXG4gICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0Jykub24gJ2NoYW5nZScsIChlKSAtPlxuICAgICAgJHRhZy5yZW1vdmVDbGFzcygndGFnbGEtdGFnLWNob29zZSB0YWdsYS10YWctYWN0aXZlJylcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCd0YWdsYTplZGl0JywgJHRhZy5kYXRhKCd0YWctZGF0YScpKVxuXG4gIGhhbmRsZVdyYXBwZXJDbGljazogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlV3JhcHBlckNsaWNrKCkgaXMgZXhlY3V0ZWQnXG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT5cbiAgICAgICQoQCkucmVtb3ZlQ2xhc3MoJ3RhZ2xhLXRhZy1hY3RpdmUnKVxuICAgICAgJChAKS5kYXRhKCdkcmFnZ2FiaWxseScpLmRpc2FibGUoKVxuXG4gIGhhbmRsZVdpbmRvd1Jlc2l6ZTogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VSZXNpemUoKSBpcyBleGVjdXRlZCdcbiAgICBpbWFnZSA9IEBpbWFnZVswXVxuICAgIHJldHVybiBpZiBpbWFnZS53aWR0aCBpcyBAY3VycmVudFdpZHRoIGFuZCBpbWFnZS5oZWlnaHQgaXMgQGN1cnJlbnRIZWlnaHRcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAoaSwgZWwpID0+XG4gICAgICAkdGFnID0gJChlbClcbiAgICAgIHBvcyA9ICR0YWcucG9zaXRpb24oKVxuICAgICAgeCA9IChwb3MubGVmdCAvIEBjdXJyZW50V2lkdGgpICogQGltYWdlLndpZHRoKClcbiAgICAgIHkgPSAocG9zLnRvcCAvIEBjdXJyZW50SGVpZ2h0KSAqIEBpbWFnZS5oZWlnaHQoKVxuICAgICAgJHRhZy5jc3NcbiAgICAgICAgbGVmdDogXCIje3h9cHhcIlxuICAgICAgICB0b3A6IFwiI3t5fXB4XCJcbiAgICBAdXBkYXRlSW1hZ2VTaXplKClcblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIFB1YmxpYyBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gIGFkZFRhZzogKHRhZykgLT5cbiAgICBAbG9nICdhZGRUYWcoKSBpcyBleGVjdXRlZCdcbiAgICAjIFJlbmRlciB0YWcgZWxlbWVudCBieSBwcm92aWRlZCB0ZW1wbGF0ZVxuICAgICR0YWcgPSAkKE11c3RhY2hlLnJlbmRlcihAdGFnVGVtcGxhdGUsIHRhZykpXG4gICAgQHdyYXBwZXIuYXBwZW5kKCR0YWcpXG4gICAgIyBEZWZhdWx0IHBvc2l0aW9uIGZvciBuZXcgdGFnXG4gICAgdGFnLnggPSB0YWcueCB8fCA1MFxuICAgIHRhZy55ID0gdGFnLnkgfHwgNTBcbiAgICAjIE1ha2Ugb2Zmc2V0IHNvIHRoZSBwb3NpdGlvbiBjb3VsZCBiZSBjZW50ZXIgcG9pbnQgb2YgaWNvblxuICAgICMgVE9ETyAtIEN1cnJlbnQgY29udmVydCBwZXJjZW50IHRvIHBpeGVsLCBzaG91bGQgYWxsb3cgdXNlciB0b1xuICAgICMgICAgICAgIGRlZmluZSB0aGUgdW5pdCBpbnN0ZWFkIG9mIGhhcmQgY29kZSBpdFxuICAgIHggPSBAd3JhcHBlci53aWR0aCgpICogKHRhZy54IC8gMTAwKVxuICAgIHkgPSBAd3JhcHBlci5oZWlnaHQoKSAqICh0YWcueSAvIDEwMClcbiAgICBvZmZzZXRYID0gJHRhZy5vdXRlcldpZHRoKCkgLyAyXG4gICAgb2Zmc2V0WSA9ICR0YWcub3V0ZXJIZWlnaHQoKSAvIDJcbiAgICAkdGFnLmNzc1xuICAgICAgbGVmdDogXCIje3ggLSBvZmZzZXRYfXB4XCJcbiAgICAgIHRvcDogXCIje3kgLSBvZmZzZXRZfXB4XCJcbiAgICAjIFNhdmUgdGFnIGRhdGEgdG8gZGF0YSBhdHRyIGZvciBlYXN5IGFjY2Vzc1xuICAgICR0YWcuZGF0YSgndGFnLWRhdGEnLCB0YWcpXG4gICAgIyBSZW5kZXIgdGFnIGVkaXRvciB0b29sc1xuICAgIEBfYXBwbHlUb29scygkdGFnKSBpZiBAZWRpdG9yXG5cbiAgZGVsZXRlVGFnOiAoJHRhZykgLT5cbiAgICBAbG9nICdkZWxldGVUYWcoKSBpcyBleGVjdXRlZCdcblxuICBlZGl0OiAtPlxuICAgIHJldHVybiBpZiBAZWRpdG9yIGlzIG9uXG4gICAgQGxvZyAnZWRpdCgpIGlzIGV4ZWN1dGVkJ1xuICAgIEB3cmFwcGVyLmFkZENsYXNzKCd0YWdsYS1lZGl0aW5nJylcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAtPiBAX2FwcGx5VG9vbHMoJChAKSlcbiAgICBAZWRpdG9yID0gb25cblxuICB1bmVkaXQ6IC0+XG4gICAgcmV0dXJuIGlmIEBlZGl0IGlzIG9mZlxuICAgIEBsb2cgJ3VuZWRpdCgpIGlzIGV4ZWN1dGVkJ1xuICAgICQoJy50YWdsYS10YWcnKS5lYWNoIC0+IEBfcmVtb3ZlVG9vbHMoJChAKSlcbiAgICBAd3JhcHBlci5yZW1vdmVDbGFzcygndGFnbGEtZWRpdGluZycpXG4gICAgQGVkaXRvciA9IG9mZlxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgTGlmZWN5Y2xlIE1ldGhvZHNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgaW5pdDogKG9wdGlvbnMpIC0+XG4gICAgIyBDb25maWd1cmUgT3B0aW9uc1xuICAgIEBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IFtdXG4gICAgQGVkaXRvciA9IChvcHRpb25zLmVkaXRvciBpcyBvbikgPyBvbiA6IGZhbHNlXG4gICAgQGZvcm0gPSBpZiBvcHRpb25zLmZvcm0gdGhlbiAkKG9wdGlvbnMuZm9ybSkgZWxzZSBUYWdsYS5GT1JNX1RFTVBMQVRFXG4gICAgQHRhZ1RlbXBsYXRlID0gaWYgb3B0aW9ucy50YWdUZW1wbGF0ZSB0aGVuICQob3B0aW9ucy50YWdUZW1wbGF0ZSkuaHRtbCgpIGVsc2UgVGFnbGEuVEFHX1RFTVBMQVRFXG4gICAgIyBBdHRyaWJ1dGVzXG4gICAgQGRlYnVnID0gdHJ1ZVxuICAgIEBpbWFnZSA9IEB3cmFwcGVyLmZpbmQoJ2ltZycpXG4gICAgQGltYWdlTG9hZGVkID0gQGltYWdlWzBdLmNvbXBsZXRlXG4gICAgQGN1cnJlbnRXaWR0aCA9IEBpbWFnZVswXS53aWR0aFxuICAgIEBjdXJyZW50SGVpZ2h0ID0gQGltYWdlWzBdLmhlaWdodFxuXG4gIGJpbmQ6IC0+XG4gICAgQGxvZyAnYmluZCgpIGlzIGV4ZWN1dGVkJ1xuICAgIEB3cmFwcGVyXG4gICAgICAub24gJ21vdXNlZW50ZXInLCAkLnByb3h5KEBoYW5kbGVNb3VzZUVudGVyLCBAKVxuICAgICAgLm9uICdjbGljaycsICQucHJveHkoQGhhbmRsZVdyYXBwZXJDbGljaywgQClcbiAgICAgIC5vbiAnY2xpY2snLCAnLnRhZ2xhLXRhZycsICQucHJveHkoQGhhbmRsZVRhZ0NsaWNrLCBAKVxuICAgICAgLm9uICdjbGljaycsICcudGFnbGEtdGFnLWVkaXQtbGluaycsICQucHJveHkoQGhhbmRsZVRhZ0VkaXQsIEApXG4gICAgICAub24gJ2NsaWNrJywgJy50YWdsYS10YWctZGVsZXRlLWxpbmsnLCAkLnByb3h5KEBoYW5kbGVUYWdEZWxldGUsIEApXG4gICAgJCh3aW5kb3cpLnJlc2l6ZSAkLnByb3h5KEBoYW5kbGVXaW5kb3dSZXNpemUsIEApXG5cbiAgcmVuZGVyOiAtPlxuICAgICMgRGVsYXkgdG8gZ2V0IGRpbWVuc2lvbiBmaXJzdFxuICAgIHVubGVzcyBAaW1hZ2VMb2FkZWRcbiAgICAgIGltZyA9IG5ldyBJbWFnZSgpXG4gICAgICBpbWcuc3JjID0gQGltYWdlLmF0dHIoJ3NyYycpXG4gICAgICAkKGltZylcbiAgICAgICAgLm9uZSAnbG9hZCcsICQucHJveHkoQGhhbmRsZUltYWdlTG9hZCwgQClcbiAgICAgICAgLm9uZSAnZXJyb3InLCAkLnByb3h5KEBoYW5kbGVJbWFnZUVycm9yLCBAKVxuICAgICAgcmV0dXJuXG5cbiAgICBAbG9nICdyZW5kZXIoKSBpcyBleGVjdXRlZCdcbiAgICBAd3JhcHBlci5hZGRDbGFzcyAndGFnbGEnXG4gICAgQHdyYXBwZXIuYWRkQ2xhc3MgJ3RhZ2xhLWVkaXRpbmcnIGlmIEBlZGl0b3JcbiAgICBAYWRkVGFnIHRhZyBmb3IgdGFnIGluIEBkYXRhXG5cbiAgZGVzdHJveTogLT5cbiAgICBAbG9nICdkZXN0cm95KCkgaXMgZXhlY3V0ZWQnXG5cbiQuZXh0ZW5kKFRhZ2xhOjosIHByb3RvKVxuXG53aW5kb3cuU3RhY2tsYSA9IHt9IHVubGVzcyB3aW5kb3cuU3RhY2tsYVxud2luZG93LlN0YWNrbGEuVGFnbGEgPSBUYWdsYVxuXG5cbiMjI1xuICAgICAgQHdyYXBwZXIuZmluZCgnLnRhZ2xhLXNlbGVjdCcpLmVhY2ggLT5cbiAgICAgICAgJChAKS5jaG9zZW5cbiAgICAgICAgICBwbGFjZWhvbGRlcl90ZXh0X3NpbmdsZTogXCJTZWxlY3QgYW4gb3B0aW9uXCJcbiAgICAgICAgICB3aWR0aDogJzMxMHB4J1xuICAgICAgICBjaG9zZW4gPSAkKEApLmNob3NlbigpLmRhdGEoJ2Nob3NlbicpXG4gICAgICAgIGF1dG9DbG9zZSA9IGZhbHNlXG4gICAgICAgIGNob3Nlbl9yZXN1bHRTZWxlY3RfZm4gPSBjaG9zZW4ucmVzdWx0X3NlbGVjdFxuICAgICAgICBjaG9zZW4uc2VhcmNoX2NvbnRhaW5zID0gdHJ1ZVxuICAgICAgICBjaG9zZW4ucmVzdWx0X3NlbGVjdCA9IChldnQpIC0+XG4gICAgICAgICAgcmVzdWx0SGlnaGxpZ2h0ID0gbnVsbFxuICAgICAgICAgIHVubGVzcyBhdXRvQ2xvc2VcbiAgICAgICAgICAgIGV2dFsnbWV0YUtleSddID0gdHJ1ZVxuICAgICAgICAgICAgZXZ0WydjdHJsS2V5J10gPSB0cnVlXG4gICAgICAgICAgICByZXN1bHRIaWdobGlnaHQgPSBjaG9zZW4ucmVzdWx0X2hpZ2hsaWdodFxuICAgICAgICAgIHN0ZXh0ID0gY2hvc2VuLmdldF9zZWFyY2hfdGV4dCgpXG4gICAgICAgICAgcmVzdWx0ID0gY2hvc2VuX3Jlc3VsdFNlbGVjdF9mbi5jYWxsKGNob3NlbiwgZXZ0KVxuXG4gICAgICAgICAgaWYgYXV0b0Nsb3NlIGlzIG9mZiAmJiByZXN1bHRIaWdobGlnaHQgIT0gbnVsbFxuICAgICAgICAgICAgcmVzdWx0SGlnaGxpZ2h0LmFkZENsYXNzKCdyZXN1bHQtc2VsZWN0ZWQnKVxuXG4gICAgICAgICAgQHNlYXJjaF9maWVsZC52YWwoc3RleHQpXG4gICAgICAgICAgQHdpbm5vd19yZXN1bHRzKClcbiAgICAgICAgICBAc2VhcmNoX2ZpZWxkX3NjYWxlKClcbiAgICAgICAgICByZXN1bHRcbiMjI1xuIl19