(function() {
  var Tagla, proto;

  Tagla = (function() {
    function Tagla($wrapper, options) {
      if (options == null) {
        options = {};
      }
      this.wrapper = $($wrapper);
      this.init(options);
      this.bind();
    }

    return Tagla;

  })();

  Tagla.NAME = 'Tagla';

  Tagla.PREFIX = 'tagla-';

  Tagla.FORM_TEMPLATE = ['<form class="tagla-form">', '    <input type="hidden" name="x">', '    <input type="hidden" name="y">', '    <select data-placeholder="Choose tags..." type="text" name="label" class="tagla-select chosen-select">', '        <option>Frankie Issue #6</option>', '        <option>Frankie Wall Calendar 2015</option>', '        <option>Frankie A5 Daily Planner</option>', '    </select>', '</form>'].join('\n');

  Tagla.TAG_TEMPLATE = ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">', '      {{label}}', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-edit-link">', '        <i class="fs fs-pencil"></i> Edit', '      </a>', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-delete-link">', '        <i class="fs fs-cross3"></i> Delete', '      </a>', '    </span>', '    <div class="tagla-dialog">', '        {{#image}}', '        <div class="tagla-dialog-image">', '          <img src="{{image}}">', '        </div>', '        {{/image}}', '        <div class="tagla-dialog-text">', '          <h2 class="tagla-dialog-title">{{label}}</h2>', '          <div class="tagla-dialog-price">{{price}}</div>', '          <p class="tagla-dialog-description">{{description}}</p>', '          <a href="{{url}}" class="tagla-dialog-button st-btn st-btn-success st-btn-solid">', '            <i class="fs fs-cart"></i>', '            Buy Now', '          </a>', '        </div>', '    </div>', "    " + Tagla.FORM_TEMPLATE, '</div>'].join('\n');

  Tagla.NEW_TAG_TEMPLATE = ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">{{label}}</span>', '</div>'].join('\n');

  Tagla.DRAG_ATTR = {
    containment: '.tagla',
    handle: '.tagla-icon'
  };

  proto = {
    log: function(msg, type) {
      if (type == null) {
        type = 'info';
      }
      if (!this.debug || !window.console || !window.console[type]) {
        return;
      }
      return window.console[type]("[" + Tagla.NAME + "] " + msg);
    },
    formatFloat: function(num, pos) {
      var size;
      size = Math.pow(10, pos);
      return Math.round(num * size) / size;
    },
    appendTag: function(tag) {
      var $tag, offsetX, offsetY, x, y;
      this.log('appendTag() is executed');
      $tag = $(Mustache.render(this.tagTemplate, tag));
      this.wrapper.append($tag);
      x = this.wrapper.width() * (tag.x / 100);
      y = this.wrapper.height() * (tag.y / 100);
      offsetX = $tag.outerWidth() / 2;
      offsetY = $tag.outerHeight() / 2;
      console.log(x, y, offsetX, offsetY);
      return setTimeout(function() {
        $tag.css({
          left: (x - offsetX) + "px",
          top: (y - offsetY) + "px"
        }, 500);
        return $tag.data('tag-data', tag);
      });
    },
    updateImageSize: function() {
      var image;
      this.log('updateImageSize() is executed');
      image = this.image[0];
      this.currentWidth = image.width;
      this.currentHeight = image.height;
      this.widthRatio = this.currentWidth / this.naturalWidth;
      return this.heightRatio = this.currentHeight / this.naturalHeight;
    },
    handleImageError: function(e) {
      this.log('handleImageError() is executed');
      this.imageLoaded = false;
      return this.destroy();
    },
    handleImageLoad: function(e) {
      this.log('handleImageLoad() is executed');
      this.imageLoaded = true;
      this.naturalWidth = this.image[0].width;
      this.naturalHeight = this.image[0].height;
      this.updateImageSize();
      return this.render();
    },
    handleTagClick: function(e) {
      var $tag;
      this.log('handleTagClick() is executed');
      e.preventDefault();
      e.stopPropagation();
      $tag = $(e.currentTarget);
      $('.tagla-tag').each(function() {
        if (this !== $tag[0]) {
          $(this).removeClass('tagla-tag-active');
        }
        return $(this).data('draggabilly').disable();
      });
      $tag.addClass('tagla-tag-active');
      return $tag.data('draggabilly').enable();
    },
    handleTagDelete: function(e) {
      var $tag, instance;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.remove();
      instance = $tag.data('draggabilly');
      if (instance) {
        instance.destroy();
      }
      return $(document).trigger('tagla:delete', $tag.data('tag-data'));
    },
    handleTagEdit: function(e) {
      var $tag;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.addClass('tagla-tag-choose');
      $tag.find('.tagla-select').trigger('chosen:open');
      $tag.find('.tagla-select').on('change', function(e) {
        return $tag.removeClass('tagla-tag-choose tagla-tag-active');
      });
      return $(document).trigger('tagla:edit', $tag.data('tag-data'));
    },
    handleWrapperClick: function(e) {
      this.log('handleWrapperClick() is executed');
      return $('.tagla-tag').each(function() {
        $(this).removeClass('tagla-tag-active');
        return $(this).data('draggabilly').disable();
      });
    },
    handleWindowResize: function(e) {
      var image;
      this.log('handleImageResize() is executed');
      image = this.image[0];
      if (image.width === this.currentWidth && image.height === this.currentHeight) {
        return;
      }
      return this.updateImageSize();
    },
    edit: function() {
      if (this.editor === true) {
        return;
      }
      this.log('edit() is executed');
      this.wrapper.addClass('tagla-editing');
      $('.tagla-tag').each(function() {
        var instance;
        instance = $(this).data('draggabilly');
        if (instance) {
          return instance.enable();
        } else {
          instance = new Draggabilly(this, Tagla.DRAG_ATTR);
          return $(this).data('draggabilly', instance);
        }
      });
      return this.editor = true;
    },
    unedit: function() {
      if (this.edit === false) {
        return;
      }
      this.log('unedit() is executed');
      this.wrapper.find('.tagla-tag').each(function() {
        var instance;
        instance = $(this).data('draggabilly');
        return instance.disable();
      });
      this.wrapper.removeClass('tagla-editing');
      return this.editor = false;
    },
    addTag: function() {
      var $tag, instance, offsetX, offsetY, tag;
      if (!this.editor) {
        return;
      }
      this.log('addTag() is executed');
      $tag = $(Mustache.render(Tagla.NEW_TAG_TEMPLATE, tag));
      this.wrapper.append($tag);
      tag = {
        x: 50,
        y: 50
      };
      offsetX = this.formatFloat($tag.outerWidth() / 2 / this.wrapper.width() * 100, 2);
      offsetY = this.formatFloat($tag.outerHeight() / 2 / this.wrapper.height() * 100, 2);
      $tag.css({
        left: (tag.x - offsetX) + "%",
        top: (tag.y - offsetY) + "%"
      });
      instance = new Draggabilly($tag[0], Tagla.DRAG_ATTR);
      return $(this).data('draggabilly', instance);
    },
    deleteTag: function(e) {},
    init: function(options) {
      var _ref;
      this.data = options.data || [];
      this.editor = (_ref = options.editor === true) != null ? _ref : {
        on: false
      };
      this.form = options.form ? $(options.form) : Tagla.FORM_TEMPLATE;
      this.tagTemplate = options.tagTemplate ? $(options.tagTemplate).html() : Tagla.TAG_TEMPLATE;
      this.debug = true;
      this.image = this.wrapper.find('img');
      this.imageLoaded = this.image[0].complete;
      this.currentWidth = this.image[0].width;
      return this.currentHeight = this.image[0].height;
    },
    bind: function() {
      this.log('bind() is executed');
      this.wrapper.on('mouseenter', $.proxy(this.handleMouseEnter, this));
      this.wrapper.on('click', $.proxy(this.handleWrapperClick, this));
      this.wrapper.on('click', '.tagla-tag', $.proxy(this.handleTagClick, this));
      this.wrapper.on('click', '.tagla-tag-edit-link', $.proxy(this.handleTagEdit, this));
      this.wrapper.on('click', '.tagla-tag-delete-link', $.proxy(this.handleTagDelete, this));
      return $(window).on('resize', $.proxy(this.handleWindowResize, this));
    },
    render: function() {
      var img, tag, _i, _len, _ref;
      if (!this.imageLoaded) {
        img = new Image();
        img.src = this.image.attr('src');
        $(img).one('load', $.proxy(this.handleImageLoad, this)).one('error', $.proxy(this.handleImageError, this));
        return;
      }
      this.log('render() is executed');
      this.wrapper.addClass('tagla');
      _ref = this.data;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        tag = _ref[_i];
        this.appendTag(tag);
      }
      if (this.editor) {
        this.wrapper.addClass('tagla-editing');
        $('.tagla-tag').each(function() {
          var instance;
          instance = $(this).data('draggabilly');
          if (instance) {
            return instance.enable();
          } else {
            instance = new Draggabilly(this, Tagla.DRAG_ATTR);
            $(this).data('draggabilly', instance);
            return instance.disable();
          }
        });
        return this.wrapper.find('.tagla-select').each(function() {
          return $(this).chosen();
        });
      }
    },
    destroy: function() {
      return this.log('destroy() is executed');
    }
  };

  $.extend(Tagla.prototype, proto);

  window.Tagla = Tagla;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QUFvQyxTQUFBLEdBQUE7aUJBQ2xDLENBQUEsQ0FBRSxJQUFGLENBQUksQ0FBQyxNQUFMLENBQUEsRUFEa0M7UUFBQSxDQUFwQyxFQVZGO09BZE07SUFBQSxDQTlKUjtBQUFBLElBeUxBLE9BQUEsRUFBUyxTQUFBLEdBQUE7YUFDUCxJQUFDLENBQUEsR0FBRCxDQUFNLHVCQUFOLEVBRE87SUFBQSxDQXpMVDtHQWhFRixDQUFBOztBQUFBLEVBNFBBLENBQUMsQ0FBQyxNQUFGLENBQVMsS0FBSyxDQUFBLFNBQWQsRUFBa0IsS0FBbEIsQ0E1UEEsQ0FBQTs7QUFBQSxFQTZQQSxNQUFNLENBQUMsS0FBUCxHQUFlLEtBN1BmLENBQUE7QUFBQSIsImZpbGUiOiJ0YWdsYS5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFRhZ2xhXG4gIGNvbnN0cnVjdG9yOiAoJHdyYXBwZXIsIG9wdGlvbnMgPSB7fSkgLT5cbiAgICBAd3JhcHBlciA9ICQoJHdyYXBwZXIpXG4gICAgQGluaXQob3B0aW9ucylcbiAgICBAYmluZCgpXG5cblRhZ2xhLk5BTUUgPSAnVGFnbGEnXG5UYWdsYS5QUkVGSVggPSAndGFnbGEtJ1xuVGFnbGEuRk9STV9URU1QTEFURSA9IFtcbiAgJzxmb3JtIGNsYXNzPVwidGFnbGEtZm9ybVwiPidcbiAgJyAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ4XCI+J1xuICAnICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInlcIj4nXG4gICcgICAgPHNlbGVjdCBkYXRhLXBsYWNlaG9sZGVyPVwiQ2hvb3NlIHRhZ3MuLi5cIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJsYWJlbFwiIGNsYXNzPVwidGFnbGEtc2VsZWN0IGNob3Nlbi1zZWxlY3RcIj4nXG4gICcgICAgICAgIDxvcHRpb24+RnJhbmtpZSBJc3N1ZSAjNjwvb3B0aW9uPidcbiAgJyAgICAgICAgPG9wdGlvbj5GcmFua2llIFdhbGwgQ2FsZW5kYXIgMjAxNTwvb3B0aW9uPidcbiAgJyAgICAgICAgPG9wdGlvbj5GcmFua2llIEE1IERhaWx5IFBsYW5uZXI8L29wdGlvbj4nXG4gICcgICAgPC9zZWxlY3Q+J1xuICAnPC9mb3JtPidcbl0uam9pbignXFxuJylcblRhZ2xhLlRBR19URU1QTEFURSA9IFtcbiAgJzxkaXYgY2xhc3M9XCJ0YWdsYS10YWdcIj4nXG4gICcgICAgPGkgY2xhc3M9XCJ0YWdsYS1pY29uIGZzIGZzLXRhZ1wiPjwvaT4nXG4gICcgICAgPHNwYW4gY2xhc3M9XCJ0YWdsYS1sYWJlbFwiPidcbiAgJyAgICAgIHt7bGFiZWx9fSdcbiAgJyAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInRhZ2xhLXRhZy1saW5rIHRhZ2xhLXRhZy1lZGl0LWxpbmtcIj4nXG4gICcgICAgICAgIDxpIGNsYXNzPVwiZnMgZnMtcGVuY2lsXCI+PC9pPiBFZGl0J1xuICAnICAgICAgPC9hPidcbiAgJyAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInRhZ2xhLXRhZy1saW5rIHRhZ2xhLXRhZy1kZWxldGUtbGlua1wiPidcbiAgJyAgICAgICAgPGkgY2xhc3M9XCJmcyBmcy1jcm9zczNcIj48L2k+IERlbGV0ZSdcbiAgJyAgICAgIDwvYT4nXG4gICcgICAgPC9zcGFuPidcbiAgJyAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nXCI+J1xuICAnICAgICAgICB7eyNpbWFnZX19J1xuICAnICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLWltYWdlXCI+J1xuICAnICAgICAgICAgIDxpbWcgc3JjPVwie3tpbWFnZX19XCI+J1xuICAnICAgICAgICA8L2Rpdj4nXG4gICcgICAgICAgIHt7L2ltYWdlfX0nXG4gICcgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctdGV4dFwiPidcbiAgJyAgICAgICAgICA8aDIgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctdGl0bGVcIj57e2xhYmVsfX08L2gyPidcbiAgJyAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLXByaWNlXCI+e3twcmljZX19PC9kaXY+J1xuICAnICAgICAgICAgIDxwIGNsYXNzPVwidGFnbGEtZGlhbG9nLWRlc2NyaXB0aW9uXCI+e3tkZXNjcmlwdGlvbn19PC9wPidcbiAgJyAgICAgICAgICA8YSBocmVmPVwie3t1cmx9fVwiIGNsYXNzPVwidGFnbGEtZGlhbG9nLWJ1dHRvbiBzdC1idG4gc3QtYnRuLXN1Y2Nlc3Mgc3QtYnRuLXNvbGlkXCI+J1xuICAnICAgICAgICAgICAgPGkgY2xhc3M9XCJmcyBmcy1jYXJ0XCI+PC9pPidcbiAgJyAgICAgICAgICAgIEJ1eSBOb3cnXG4gICcgICAgICAgICAgPC9hPidcbiAgJyAgICAgICAgPC9kaXY+J1xuICAnICAgIDwvZGl2PidcbiAgXCIgICAgI3tUYWdsYS5GT1JNX1RFTVBMQVRFfVwiXG4gICc8L2Rpdj4nXG5dLmpvaW4oJ1xcbicpXG5UYWdsYS5ORVdfVEFHX1RFTVBMQVRFID0gW1xuICAnPGRpdiBjbGFzcz1cInRhZ2xhLXRhZ1wiPidcbiAgJyAgICA8aSBjbGFzcz1cInRhZ2xhLWljb24gZnMgZnMtdGFnXCI+PC9pPidcbiAgJyAgICA8c3BhbiBjbGFzcz1cInRhZ2xhLWxhYmVsXCI+e3tsYWJlbH19PC9zcGFuPidcbiAgJzwvZGl2Pidcbl0uam9pbignXFxuJylcblRhZ2xhLkRSQUdfQVRUUiA9XG4gIGNvbnRhaW5tZW50OiAnLnRhZ2xhJ1xuICBoYW5kbGU6ICcudGFnbGEtaWNvbidcblxucHJvdG8gPVxuICAjIyMjIyMjIyMjIyMjI1xuICAjIFV0aWxpdGllc1xuICAjIyMjIyMjIyMjIyMjI1xuICBsb2c6IChtc2csIHR5cGUgPSAnaW5mbycpIC0+XG4gICAgcmV0dXJuIGlmICFAZGVidWcgb3IgIXdpbmRvdy5jb25zb2xlIG9yICF3aW5kb3cuY29uc29sZVt0eXBlXVxuICAgIHdpbmRvdy5jb25zb2xlW3R5cGVdIFwiWyN7VGFnbGEuTkFNRX1dICN7bXNnfVwiXG5cbiAgZm9ybWF0RmxvYXQ6IChudW0sIHBvcykgLT5cbiAgICBzaXplID0gTWF0aC5wb3coMTAsIHBvcylcbiAgICBNYXRoLnJvdW5kKG51bSAqIHNpemUpIC8gc2l6ZVxuXG4gIGFwcGVuZFRhZzogKHRhZykgLT5cbiAgICBAbG9nICdhcHBlbmRUYWcoKSBpcyBleGVjdXRlZCdcbiAgICAkdGFnID0gJChNdXN0YWNoZS5yZW5kZXIoQHRhZ1RlbXBsYXRlLCB0YWcpKVxuICAgIEB3cmFwcGVyLmFwcGVuZCgkdGFnKVxuXG4gICAgeCA9IEB3cmFwcGVyLndpZHRoKCkgKiAodGFnLnggLyAxMDApXG4gICAgeSA9IEB3cmFwcGVyLmhlaWdodCgpICogKHRhZy55IC8gMTAwKVxuICAgIG9mZnNldFggPSAkdGFnLm91dGVyV2lkdGgoKSAvIDJcbiAgICBvZmZzZXRZID0gJHRhZy5vdXRlckhlaWdodCgpIC8gMlxuICAgIGNvbnNvbGUubG9nKHgsIHksIG9mZnNldFgsIG9mZnNldFkpXG4gICAgc2V0VGltZW91dCAtPlxuICAgICAgJHRhZy5jc3NcbiAgICAgICAgbGVmdDogXCIje3ggLSBvZmZzZXRYfXB4XCJcbiAgICAgICAgdG9wOiBcIiN7eSAtIG9mZnNldFl9cHhcIlxuICAgICAgLCA1MDBcbiAgICAgICR0YWcuZGF0YSgndGFnLWRhdGEnLCB0YWcpXG5cbiAgdXBkYXRlSW1hZ2VTaXplOiAtPlxuICAgIEBsb2cgJ3VwZGF0ZUltYWdlU2l6ZSgpIGlzIGV4ZWN1dGVkJ1xuICAgIGltYWdlID0gQGltYWdlWzBdXG4gICAgQGN1cnJlbnRXaWR0aCA9IGltYWdlLndpZHRoXG4gICAgQGN1cnJlbnRIZWlnaHQgPSBpbWFnZS5oZWlnaHRcbiAgICBAd2lkdGhSYXRpbyA9IEBjdXJyZW50V2lkdGggLyBAbmF0dXJhbFdpZHRoXG4gICAgQGhlaWdodFJhdGlvID0gQGN1cnJlbnRIZWlnaHQgLyBAbmF0dXJhbEhlaWdodFxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgRXZlbnQgSGFuZGxlcnNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgaGFuZGxlSW1hZ2VFcnJvcjogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VFcnJvcigpIGlzIGV4ZWN1dGVkJ1xuICAgIEBpbWFnZUxvYWRlZCA9IGZhbHNlXG4gICAgQGRlc3Ryb3koKVxuXG4gIGhhbmRsZUltYWdlTG9hZDogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VMb2FkKCkgaXMgZXhlY3V0ZWQnXG4gICAgQGltYWdlTG9hZGVkID0gdHJ1ZVxuICAgIEBuYXR1cmFsV2lkdGggPSBAaW1hZ2VbMF0ud2lkdGhcbiAgICBAbmF0dXJhbEhlaWdodCA9IEBpbWFnZVswXS5oZWlnaHRcbiAgICBAdXBkYXRlSW1hZ2VTaXplKClcbiAgICBAcmVuZGVyKClcblxuICBoYW5kbGVUYWdDbGljazogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KVxuICAgICQoJy50YWdsYS10YWcnKS5lYWNoIC0+XG4gICAgICAkKEApLnJlbW92ZUNsYXNzKCd0YWdsYS10YWctYWN0aXZlJykgaWYgQCBpc250ICR0YWdbMF1cbiAgICAgICQoQCkuZGF0YSgnZHJhZ2dhYmlsbHknKS5kaXNhYmxlKClcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctYWN0aXZlJylcbiAgICAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JykuZW5hYmxlKClcblxuICBoYW5kbGVUYWdEZWxldGU6IChlKSAtPlxuICAgIEBsb2cgJ2hhbmRsZVRhZ0RlbGV0ZSgpIGlzIGV4ZWN1dGVkJ1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICR0YWcgPSAkKGUuY3VycmVudFRhcmdldCkucGFyZW50cygnLnRhZ2xhLXRhZycpXG4gICAgJHRhZy5yZW1vdmUoKVxuICAgIGluc3RhbmNlID0gJHRhZy5kYXRhKCdkcmFnZ2FiaWxseScpXG4gICAgaW5zdGFuY2UuZGVzdHJveSgpIGlmIChpbnN0YW5jZSlcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCd0YWdsYTpkZWxldGUnLCAkdGFnLmRhdGEoJ3RhZy1kYXRhJykpXG5cbiAgaGFuZGxlVGFnRWRpdDogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnRGVsZXRlKCkgaXMgZXhlY3V0ZWQnXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKS50cmlnZ2VyKCdjaG9zZW46b3BlbicpXG4gICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0Jykub24gJ2NoYW5nZScsIChlKSAtPlxuICAgICAgJHRhZy5yZW1vdmVDbGFzcygndGFnbGEtdGFnLWNob29zZSB0YWdsYS10YWctYWN0aXZlJylcbiAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCd0YWdsYTplZGl0JywgJHRhZy5kYXRhKCd0YWctZGF0YScpKVxuXG4gIGhhbmRsZVdyYXBwZXJDbGljazogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlV3JhcHBlckNsaWNrKCkgaXMgZXhlY3V0ZWQnXG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT5cbiAgICAgICQoQCkucmVtb3ZlQ2xhc3MoJ3RhZ2xhLXRhZy1hY3RpdmUnKVxuICAgICAgJChAKS5kYXRhKCdkcmFnZ2FiaWxseScpLmRpc2FibGUoKVxuXG4gIGhhbmRsZVdpbmRvd1Jlc2l6ZTogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VSZXNpemUoKSBpcyBleGVjdXRlZCdcbiAgICBpbWFnZSA9IEBpbWFnZVswXVxuICAgIHJldHVybiBpZiBpbWFnZS53aWR0aCBpcyBAY3VycmVudFdpZHRoIGFuZCBpbWFnZS5oZWlnaHQgaXMgQGN1cnJlbnRIZWlnaHRcbiAgICBAdXBkYXRlSW1hZ2VTaXplKClcblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIFB1YmxpYyBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gIGVkaXQ6IC0+XG4gICAgcmV0dXJuIGlmIEBlZGl0b3IgaXMgb25cbiAgICBAbG9nICdlZGl0KCkgaXMgZXhlY3V0ZWQnXG4gICAgQHdyYXBwZXIuYWRkQ2xhc3MoJ3RhZ2xhLWVkaXRpbmcnKVxuICAgICQoJy50YWdsYS10YWcnKS5lYWNoIC0+XG4gICAgICBpbnN0YW5jZSA9ICQoQCkuZGF0YSgnZHJhZ2dhYmlsbHknKVxuICAgICAgaWYgaW5zdGFuY2VcbiAgICAgICAgaW5zdGFuY2UuZW5hYmxlKClcbiAgICAgIGVsc2VcbiAgICAgICAgaW5zdGFuY2UgPSBuZXcgRHJhZ2dhYmlsbHkoQCwgVGFnbGEuRFJBR19BVFRSKVxuICAgICAgICAkKEApLmRhdGEoJ2RyYWdnYWJpbGx5JywgaW5zdGFuY2UpXG4gICAgQGVkaXRvciA9IG9uXG5cbiAgdW5lZGl0OiAtPlxuICAgIHJldHVybiBpZiBAZWRpdCBpcyBvZmZcbiAgICBAbG9nICd1bmVkaXQoKSBpcyBleGVjdXRlZCdcbiAgICBAd3JhcHBlci5maW5kKCcudGFnbGEtdGFnJykuZWFjaCAtPlxuICAgICAgaW5zdGFuY2UgPSAkKEApLmRhdGEoJ2RyYWdnYWJpbGx5JylcbiAgICAgIGluc3RhbmNlLmRpc2FibGUoKVxuICAgIEB3cmFwcGVyLnJlbW92ZUNsYXNzKCd0YWdsYS1lZGl0aW5nJylcbiAgICBAZWRpdG9yID0gb2ZmXG5cbiAgYWRkVGFnOiAtPlxuICAgIHJldHVybiB1bmxlc3MgQGVkaXRvciAjIE9ubHkgZm9yIGVkaXRvciBtb2RlXG4gICAgQGxvZyAnYWRkVGFnKCkgaXMgZXhlY3V0ZWQnXG4gICAgJHRhZyA9ICQoTXVzdGFjaGUucmVuZGVyKFRhZ2xhLk5FV19UQUdfVEVNUExBVEUsIHRhZykpXG4gICAgQHdyYXBwZXIuYXBwZW5kKCR0YWcpXG4gICAgdGFnID0geDogNTAsIHk6IDUwXG4gICAgb2Zmc2V0WCA9IEBmb3JtYXRGbG9hdCgkdGFnLm91dGVyV2lkdGgoKSAvIDIgLyBAd3JhcHBlci53aWR0aCgpICogMTAwLCAyKVxuICAgIG9mZnNldFkgPSBAZm9ybWF0RmxvYXQoJHRhZy5vdXRlckhlaWdodCgpIC8gMiAvIEB3cmFwcGVyLmhlaWdodCgpICogMTAwLCAyKVxuICAgICR0YWcuY3NzXG4gICAgICBsZWZ0OiBcIiN7dGFnLnggLSBvZmZzZXRYfSVcIlxuICAgICAgdG9wOiBcIiN7dGFnLnkgLSBvZmZzZXRZfSVcIlxuICAgIGluc3RhbmNlID0gbmV3IERyYWdnYWJpbGx5KCR0YWdbMF0sIFRhZ2xhLkRSQUdfQVRUUilcbiAgICAkKEApLmRhdGEoJ2RyYWdnYWJpbGx5JywgaW5zdGFuY2UpXG5cbiAgZGVsZXRlVGFnOiAoZSkgLT5cblxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgTGlmZWN5Y2xlIE1ldGhvZHNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgaW5pdDogKG9wdGlvbnMpIC0+XG4gICAgIyBDb25maWd1cmUgT3B0aW9uc1xuICAgIEBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IFtdXG4gICAgQGVkaXRvciA9IChvcHRpb25zLmVkaXRvciBpcyBvbikgPyBvbiA6IGZhbHNlXG4gICAgQGZvcm0gPSBpZiBvcHRpb25zLmZvcm0gdGhlbiAkKG9wdGlvbnMuZm9ybSkgZWxzZSBUYWdsYS5GT1JNX1RFTVBMQVRFXG4gICAgQHRhZ1RlbXBsYXRlID0gaWYgb3B0aW9ucy50YWdUZW1wbGF0ZSB0aGVuICQob3B0aW9ucy50YWdUZW1wbGF0ZSkuaHRtbCgpIGVsc2UgVGFnbGEuVEFHX1RFTVBMQVRFXG4gICAgIyBBdHRyaWJ1dGVzXG4gICAgQGRlYnVnID0gdHJ1ZVxuICAgIEBpbWFnZSA9IEB3cmFwcGVyLmZpbmQoJ2ltZycpXG4gICAgQGltYWdlTG9hZGVkID0gQGltYWdlWzBdLmNvbXBsZXRlXG4gICAgQGN1cnJlbnRXaWR0aCA9IEBpbWFnZVswXS53aWR0aFxuICAgIEBjdXJyZW50SGVpZ2h0ID0gQGltYWdlWzBdLmhlaWdodFxuXG4gIGJpbmQ6IC0+XG4gICAgQGxvZyAnYmluZCgpIGlzIGV4ZWN1dGVkJ1xuICAgIEB3cmFwcGVyLm9uICdtb3VzZWVudGVyJywgJC5wcm94eShAaGFuZGxlTW91c2VFbnRlciwgQClcbiAgICBAd3JhcHBlci5vbiAnY2xpY2snLCAkLnByb3h5KEBoYW5kbGVXcmFwcGVyQ2xpY2ssIEApXG4gICAgQHdyYXBwZXIub24gJ2NsaWNrJywgJy50YWdsYS10YWcnLCAkLnByb3h5KEBoYW5kbGVUYWdDbGljaywgQClcbiAgICBAd3JhcHBlci5vbiAnY2xpY2snLCAnLnRhZ2xhLXRhZy1lZGl0LWxpbmsnLCAkLnByb3h5KEBoYW5kbGVUYWdFZGl0LCBAKVxuICAgIEB3cmFwcGVyLm9uICdjbGljaycsICcudGFnbGEtdGFnLWRlbGV0ZS1saW5rJywgJC5wcm94eShAaGFuZGxlVGFnRGVsZXRlLCBAKVxuICAgICQod2luZG93KS5vbiAncmVzaXplJywgJC5wcm94eShAaGFuZGxlV2luZG93UmVzaXplLCBAKVxuXG4gIHJlbmRlcjogLT5cbiAgICAjIERlbGF5IHRvIGdldCBkaW1lbnNpb24gZmlyc3RcbiAgICB1bmxlc3MgQGltYWdlTG9hZGVkXG4gICAgICBpbWcgPSBuZXcgSW1hZ2UoKVxuICAgICAgaW1nLnNyYyA9IEBpbWFnZS5hdHRyKCdzcmMnKVxuICAgICAgJChpbWcpXG4gICAgICAgIC5vbmUgJ2xvYWQnLCAkLnByb3h5KEBoYW5kbGVJbWFnZUxvYWQsIEApXG4gICAgICAgIC5vbmUgJ2Vycm9yJywgJC5wcm94eShAaGFuZGxlSW1hZ2VFcnJvciwgQClcbiAgICAgIHJldHVyblxuXG4gICAgQGxvZyAncmVuZGVyKCkgaXMgZXhlY3V0ZWQnXG4gICAgQHdyYXBwZXIuYWRkQ2xhc3MgJ3RhZ2xhJ1xuICAgIEBhcHBlbmRUYWcgdGFnIGZvciB0YWcgaW4gQGRhdGFcblxuICAgIGlmIEBlZGl0b3JcbiAgICAgIEB3cmFwcGVyLmFkZENsYXNzICd0YWdsYS1lZGl0aW5nJ1xuICAgICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT5cbiAgICAgICAgaW5zdGFuY2UgPSAkKEApLmRhdGEoJ2RyYWdnYWJpbGx5JylcbiAgICAgICAgaWYgaW5zdGFuY2VcbiAgICAgICAgICBpbnN0YW5jZS5lbmFibGUoKVxuICAgICAgICBlbHNlXG4gICAgICAgICAgaW5zdGFuY2UgPSBuZXcgRHJhZ2dhYmlsbHkoQCwgVGFnbGEuRFJBR19BVFRSKVxuICAgICAgICAgICQoQCkuZGF0YSgnZHJhZ2dhYmlsbHknLCBpbnN0YW5jZSlcbiAgICAgICAgICBpbnN0YW5jZS5kaXNhYmxlKClcbiAgICAgIEB3cmFwcGVyLmZpbmQoJy50YWdsYS1zZWxlY3QnKS5lYWNoIC0+XG4gICAgICAgICQoQCkuY2hvc2VuKClcblxuICBkZXN0cm95OiAtPlxuICAgIEBsb2cgJ2Rlc3Ryb3koKSBpcyBleGVjdXRlZCdcblxuJC5leHRlbmQoVGFnbGE6OiwgcHJvdG8pXG53aW5kb3cuVGFnbGEgPSBUYWdsYVxuIl19