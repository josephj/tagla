@import 'chosen-override'

// Fade-in Effect
@keyframes fadein
  from
    opacity: 0
  to:
    opacity: 1

$tag-size: 48px
$tag-color: #693

// Editing Mode
&.tagla-editing
  user-select: none

//=========
// Tag
//=========
.tagla-tag
  background-color: rgba($tag-color, 0.5)
  border: dashed 1px #fff
  border-radius: $tag-size
  box-sizing: border-box
  height: $tag-size
  left: calc(100% - 24px)
  overflow: hidden
  position: absolute
  top: -24px
  text-align: center
  transition: all 0.5s
  vertical-align: middle
  width: $tag-size
  z-index: 0

  &.tagla-tag-hover
    background-color: $tag-color
    box-shadow: 0 0 5px 1px rgba(#fff, 0.7)
    overflow: visible

  // Inner border
  &:before
    border: dotted 1px #316500
    border-radius: $tag-size
    bottom: 0
    content: ''
    display: block
    left: 0
    position: absolute
    right: 0
    top: 0
    z-index: -1

// Icon
.tagla-icon
  color: #fff
  font-size: 30px
  line-height: 48px
  position: absolute
  left: 8px
  top: 0
  &:before
    text-shadow: 0 1px 1px rgba(#000, 0.5)

// Link
.tagla-tag-link
  text-decoration: none
  color: #333
  font-weight: normal
  display: inline-block
  padding: 0 5px
  &.tagla-tag-edit-link
    color: #693
  &.tagla-tag-delete-link
    color: #d14835

//=========
// Dialog
//=========
.tagla-dialog
  background: #fff
  box-shadow: 1px 1px 2px rgba(black, 0.6)
  color: #333
  display: block
  margin-top: 3px
  min-height: 100px
  opacity: 0
  padding: 20px 19px
  position: absolute
  text-align: left
  left: 0
  top: 100%
  transition: opacity 0.5s
  z-index: 1
  width: 480px
  &:before
    background: transparent
    content: ''
    height: 10px
    left: 0
    position: absolute;
    right: 0
    top: -10px
  .tagla-tag.tagla-tag-hover &
    opacity: 1

.tagla-dialog-image
  float: left
  margin-right: 17px
  max-width: 220px

.tagla-dialog-text
  display: table

.tagla-dialog-title
  font-size: 18px
  margin: 12px 0

.tagla-dialog-price
  font-size: 16px

.tagla-dialog-description
  font-size: 12px
  margin: 12px 0
  text-align: left

.tagla-dialog-button
  background: #659a2a
  border-radius: 3px
  color: #fff
  display: inline-block
  font-style: normal
  font-weight: bold
  padding: 15px 20px
  position: static
  text-decoration: none

.tagla-dialog-loading
  &:before
    background-color: rgba(#fff, 0.5)
    bottom: 0
    height: auto
    left: 0
    position: absolute
    right: 0
    top: 0
    z-index: 1
  &:after
    content: 'Saving...'
    font-weight: bold
    vertical-align: middle
    left: 0
    position: absolute
    right: 0
    text-align: center
    text-shadow: 0 1px 0 rgba(#fff, 0.5)
    top: 50%;
    transform: translateY(-50%)
    z-index: 1

//=========
// Form
//=========
.tagla-form
  left: 0
  opacity: 0
  position: absolute
  text-align: left
  top: 100%
  transition: opacity 0.5s

.tagla-form-title
  background: #404040
  border: none
  border-top-left-radius: 4px
  border-top-right-radius: 4px
  color: #fff
  font-size: 14px
  font-weight: bold
  height: auto
  padding: 10px 20px
  position: relative
  top: 10px

.tagla-form-close
  border-radius: 19px
  font-size: 22px
  font-weight: bold
  position: absolute
  right: 20px
  top: 3px
  text-decoration: none
  &:link, &:visited
    color: #fff

.tagla-form-empty
  background: #fff
  border-bottom-left-radius: 4px
  border-bottom-right-radius: 4px
  box-shadow: 1px 1px 2px rgba(black, 0.6)
  font-size: 13px
  line-height: 1.4
  padding: 40px 30px 50px
  text-align: center
  width: 280px

//===========================
// Editor Mode (None Active)
//===========================
// Has none active tag
.tagla-editing .tagla-tag
  // Default
  transition: all 0.1s linear
  &.tagla-tag-hover
    z-index: 1
  .tagla-icon
    cursor: move
    z-index: 1
  // Dragging
  &.is-dragging
    background-color: $tag-color
    box-shadow: 0 0 5px 1px rgba(#fff, 0.7)
    transition: all 0.1s linear
    .tagla-dialog
      opacity: 0
  // New tag (fade-in)
  &.tagla-tag-new
    transition: none
    animation: fadein 0.5s
    z-index: 2
  // New tag and dragging
  &.tagla-tag-new.is-dragging
    transition: all 0.1s linear

// Has one active tag
.tagla-editing.tagla-editing-selecting .tagla-tag
  // Default - Not Editable
  background-color: rgba($tag-color, 0.5)
  box-shadow: none
  overflow: hidden
  z-index: 0
  .tagla-icon
    cursor: default
  // Active
  &.tagla-tag-choose
    background-color: $tag-color
    box-shadow: 0 0 5px 1px rgba(#fff, 0.7)
    overflow: visible
    z-index: 3
    .tagla-icon
      cursor: move
    .tagla-form
      opacity: 1
      z-index: 1
    .tagla-dialog
      opacity: 0
  // Dragging
  &.is-dragging .tagla-form
    opacity: 0

// Disable transition when it's Safari (Dragging is jerky)
//.tagla.tagla-editing.tagla-safari .tagla-tag
.tagla.tagla-editing .tagla-tag
  transition: none !important

