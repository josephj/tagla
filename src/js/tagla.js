(function() {
  var ATTRS, Tagla, proto,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __hasProp = {}.hasOwnProperty;

  ATTRS = {
    NAME: 'Tagla',
    PREFIX: 'tagla-',
    DRAG_ATTR: {
      containment: '.tagla',
      handle: '.tagla-icon'
    },
    SELECT_ATTR: {
      allow_single_deselect: true,
      placeholder_text_single: 'Select an option',
      width: '310px'
    },
    FORM_TEMPLATE: [].join('\n'),
    TAG_TEMPLATE: ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">', '      {{label}}', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-edit-link">', '        <i class="fs fs-pencil"></i> Edit', '      </a>', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-delete-link">', '        <i class="fs fs-cross3"></i> Delete', '      </a>', '    </span>', '    <div class="tagla-dialog">', '        {{#image}}', '        <div class="tagla-dialog-image">', '          <img src="{{image}}">', '        </div>', '        {{/image}}', '        <div class="tagla-dialog-text">', '          <h2 class="tagla-dialog-title">{{label}}</h2>', '          <div class="tagla-dialog-price">{{price}}</div>', '          <p class="tagla-dialog-description">{{description}}</p>', '          <a href="{{url}}" class="tagla-dialog-button st-btn st-btn-success st-btn-solid">', '            <i class="fs fs-cart"></i>', '            Buy Now', '          </a>', '        </div>', '    </div>', '    <form class="tagla-form">', '        <div class="tagla-form-title">', '          Select Your Product', '          <a href="javascript:void(0);" class="tagla-form-close">Ã—</a>', '        </div>', '        <input type="hidden" name="x">', '        <input type="hidden" name="y">', '        <select data-placeholder="Search" type="text" name="tag" class="tagla-select chosen-select" placeholder="Search">', '            <option></option>', '            <option value="1">Cockie</option>', '            <option value="2">Kiwi</option>', '            <option value="3">Buddy</option>', '        </select>', '    </form>', '</div>'].join('\n'),
    NEW_TAG_TEMPLATE: ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">{{label}}</span>', '</div>'].join('\n')
  };

  Tagla = (function(_super) {
    __extends(Tagla, _super);

    function Tagla($wrapper, options) {
      if (options == null) {
        options = {};
      }
      Tagla.__super__.constructor.call(this);
      this.wrapper = $($wrapper);
      this.init(options);
      this.bind();
    }

    return Tagla;

  })(Stackla.Base);

  $.extend(Tagla, ATTRS);

  proto = {
    formatFloat: function(num, pos) {
      var size;
      size = Math.pow(10, pos);
      return Math.round(num * size) / size;
    },
    toString: function() {
      return 'Tagla';
    },
    _applyTools: function($tag) {
      var $form, drag, tag;
      drag = new Draggabilly($tag[0], Tagla.DRAG_ATTR);
      drag.on('dragEnd', $.proxy(this.handleTagMove, this));
      drag.disable();
      $tag.data('draggabilly', drag);
      tag = $tag.data('tag-data');
      $form = $tag.find('.tagla-form');
      $form.find('[name=x]').val(tag.x);
      $form.find('[name=y]').val(tag.y);
      $form.find("[name=tag] option[value=" + tag.value + "]").attr('selected', 'selected');
      $tag.find('.tagla-select').chosen(Tagla.SELECT_ATTR);
      return $tag.find('.tagla-select').on('change', $.proxy(this.handleTagChange, this));
    },
    _removeTools: function($tag) {
      var $select;
      $tag.data('draggabilly').destroy();
      $select = $tag.find('.tagla-select');
      $select.show().removeClass('chzn-done');
      return $select.next().remove();
    },
    _getPosition: function($tag) {
      var pos, x, y;
      this.log('_getPosition() is executed');
      pos = $tag.position();
      x = (pos.left + ($tag.width() / 2)) / this.currentWidth * this.naturalWidth;
      y = (pos.top + ($tag.height() / 2)) / this.currentHeight * this.naturalWidth;
      if (this.unit === 'percent') {
        x = x / this.naturalWidth * 100;
        y = y / this.naturalHeight * 100;
      }
      return [x, y];
    },
    _updateImageSize: function(data) {
      var error;
      this.log('_updateImageSize() is executed');
      try {
        this.naturalWidth = data.naturalWidth;
        this.naturalHeight = data.naturalHeight;
        this.currentWidth = data.width;
        this.currentHeight = data.height;
        this.widthRatio = data.widthRatio;
        return this.heightRatio = data.heightRatio;
      } catch (_error) {
        error = _error;
        debugger;
        return console.error(error);
      }
    },
    handleTagClick: function(e) {
      var $tag;
      e.preventDefault();
      e.stopPropagation();
      if (!$(e.target).hasClass('tagla-icon')) {
        return;
      }
      this.log('handleTagClick() is executed');
      $tag = $(e.currentTarget);
      this.shrink($tag);
      $tag.addClass('tagla-tag-active');
      return $tag.data('draggabilly').enable();
    },
    handleTagChange: function(e, params) {
      var $select, $tag, data, serialize;
      this.log('handleTagChange() is executed');
      $select = $(e.target);
      $tag = $select.parents('.tagla-tag');
      $tag.removeClass('tagla-tag-choose tagla-tag-active');
      data = $tag.data('tag-data');
      data.label = $select.find('option:selected').text();
      data.value = $select.val() || data.label;
      serialize = $tag.find('.tagla-form').serialize();
      return this.emit('change', [data, serialize, $tag]);
    },
    handleTagDelete: function(e) {
      var $tag, data, instance;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.remove();
      instance = $tag.data('draggabilly');
      if (instance) {
        instance.destroy();
      }
      data = $tag.data('tag-data');
      return this.emit('delete', [data]);
    },
    handleTagEdit: function(e) {
      var $tag;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.addClass('tagla-tag-choose');
      $tag.find('.tagla-select').trigger('chosen:open');
      return this.emit('tagla:edit', [$tag.data('tag-data')]);
    },
    handleTagMove: function(instance, event, pointer) {
      var $form, $tag, data, pos, serialize;
      this.log('handleTagMove() is executed');
      $tag = $(instance.element);
      data = $tag.data('tag-data');
      pos = this._getPosition($tag);
      data.x = pos[0];
      data.y = pos[1];
      $form = $tag.find('.tagla-form');
      $form.find('[name=x]').val(data.x);
      $form.find('[name=y]').val(data.y);
      serialize = $tag.find('.tagla-form').serialize();
      return this.emit('move', [data, serialize, $tag]);
    },
    handleWrapperClick: function(e) {
      this.log('handleWrapperClick() is executed');
      return this.shrink();
    },
    handleImageResize: function(e, data) {
      var prevHeight, prevWidth;
      this.log('handleImageResize() is executed');
      prevWidth = this.currentWidth;
      prevHeight = this.currentHeight;
      $('.tagla-tag').each(function() {
        var $tag, pos, x, y;
        $tag = $(this);
        pos = $tag.position();
        x = (pos.left / prevWidth) * data.width;
        y = (pos.top / prevHeight) * data.height;
        return $tag.css({
          left: x + "px",
          top: y + "px"
        });
      });
      return this._updateImageSize(data);
    },
    addTag: function(tag) {
      var $tag, isNew, offsetX, offsetY, x, y;
      if (tag == null) {
        tag = {};
      }
      this.log('addTag() is executed');
      $tag = $(Mustache.render(this.tagTemplate, tag));
      isNew = $.isEmptyObject(tag);
      this.wrapper.append($tag);
      if (isNew) {
        tag.x = 50;
        tag.y = 50;
        $tag.addClass('tagla-tag-new tagla-tag-active tagla-tag-choose');
      }
      if (this.unit === 'percent') {
        x = this.currentWidth * (tag.x / 100);
        y = this.currentHeight * (tag.y / 100);
      } else {
        x = tag.x * this.widthRatio;
        y = tag.y * this.heightRatio;
      }
      offsetX = $tag.outerWidth() / 2;
      offsetY = $tag.outerHeight() / 2;
      $tag.css({
        left: (x - offsetX) + "px",
        top: (y - offsetY) + "px"
      });
      $tag.data('tag-data', tag);
      if (this.editor) {
        this._applyTools($tag);
        if (isNew) {
          $tag.data('draggabilly').enable();
          $tag.addClass('tagla-tag-choose');
          return $tag.find('.tagla-select').trigger('chosen:open');
        }
      }
    },
    deleteTag: function($tag) {
      return this.log('deleteTag() is executed');
    },
    edit: function() {
      if (this.editor === true) {
        return;
      }
      this.log('edit() is executed');
      this.wrapper.addClass('tagla-editing');
      $('.tagla-tag').each(function() {
        return this._applyTools($(this));
      });
      return this.editor = true;
    },
    shrink: function($except) {
      if ($except == null) {
        $except = null;
      }
      if (this.editor === false) {
        return;
      }
      this.log('shrink() is executed');
      $except = $($except);
      return $('.tagla-tag').each(function() {
        var $tag;
        if ($except[0] === this) {
          return;
        }
        $tag = $(this);
        if ($tag.hasClass('tagla-tag-new') && !$tag.find('[name=tag]').val()) {
          $tag.remove();
        }
        $tag.removeClass('tagla-tag-active tagla-tag-choose');
        return $tag.data('draggabilly').disable();
      });
    },
    updateDialog: function($tag, data) {
      var html;
      html = $(Mustache.render(this.tagTemplate, data)).find('.tagla-dialog').html();
      $tag.find('.tagla-dialog').html(html);
      return $tag.data('tag-data', data);
    },
    unedit: function() {
      if (this.edit === false) {
        return;
      }
      this.log('unedit() is executed');
      $('.tagla-tag').each(function() {
        return this._removeTools($(this));
      });
      this.wrapper.removeClass('tagla-editing');
      return this.editor = false;
    },
    init: function(options) {
      var _ref;
      this.data = options.data || [];
      this.editor = (_ref = options.editor === true) != null ? _ref : {
        on: false
      };
      this.form = options.form ? $(options.form) : Tagla.FORM_TEMPLATE;
      this.tagTemplate = options.tagTemplate ? $(options.tagTemplate).html() : Tagla.TAG_TEMPLATE;
      this.unit = options.unit === 'percent' ? 'percent' : 'pixel';
      this.imageSize = null;
      return this.image = this.wrapper.find('img');
    },
    bind: function() {
      this.log('bind() is executed');
      return this.wrapper.on('mouseenter', $.proxy(this.handleMouseEnter, this)).on('click', $.proxy(this.handleWrapperClick, this)).on('click', '.tagla-tag', $.proxy(this.handleTagClick, this)).on('click', '.tagla-tag-edit-link', $.proxy(this.handleTagEdit, this)).on('click', '.tagla-tag-delete-link', $.proxy(this.handleTagDelete, this));
    },
    renderFn: function(success, data) {
      var tag, _i, _len, _ref, _results;
      if (!success) {
        this.log("Failed to load image: " + (this.image.attr('src')), 'error');
        this.destroy();
        return;
      }
      this._updateImageSize(data);
      this.wrapper.addClass('tagla');
      if (this.editor) {
        this.wrapper.addClass('tagla-editing');
      }
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        tag = _ref[_i];
        _results.push(this.addTag(tag));
      }
      return _results;
    },
    render: function() {
      this.log('render() is executed');
      this.imageSize = Stackla.getImageSize(this.image, $.proxy(this.renderFn, this));
      return this.imageSize.on('change', $.proxy(this.handleImageResize, this));
    },
    destroy: function() {
      return this.log('destroy() is executed');
    }
  };

  $.extend(Tagla.prototype, proto);

  if (!window.Stackla) {
    window.Stackla = {};
  }

  window.Stackla.Tagla = Tagla;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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c291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkFUVFJTID1cbiAgTkFNRTogJ1RhZ2xhJ1xuICBQUkVGSVg6ICd0YWdsYS0nXG4gIERSQUdfQVRUUjpcbiAgICBjb250YWlubWVudDogJy50YWdsYSdcbiAgICBoYW5kbGU6ICcudGFnbGEtaWNvbidcbiAgU0VMRUNUX0FUVFI6XG4gICAgYWxsb3dfc2luZ2xlX2Rlc2VsZWN0OiBvblxuICAgIHBsYWNlaG9sZGVyX3RleHRfc2luZ2xlOiAnU2VsZWN0IGFuIG9wdGlvbidcbiAgICB3aWR0aDogJzMxMHB4J1xuICBGT1JNX1RFTVBMQVRFOiBbXG4gIF0uam9pbignXFxuJylcbiAgVEFHX1RFTVBMQVRFOiBbXG4gICAgJzxkaXYgY2xhc3M9XCJ0YWdsYS10YWdcIj4nXG4gICAgJyAgICA8aSBjbGFzcz1cInRhZ2xhLWljb24gZnMgZnMtdGFnXCI+PC9pPidcbiAgICAnICAgIDxzcGFuIGNsYXNzPVwidGFnbGEtbGFiZWxcIj4nXG4gICAgJyAgICAgIHt7bGFiZWx9fSdcbiAgICAnICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwidGFnbGEtdGFnLWxpbmsgdGFnbGEtdGFnLWVkaXQtbGlua1wiPidcbiAgICAnICAgICAgICA8aSBjbGFzcz1cImZzIGZzLXBlbmNpbFwiPjwvaT4gRWRpdCdcbiAgICAnICAgICAgPC9hPidcbiAgICAnICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwidGFnbGEtdGFnLWxpbmsgdGFnbGEtdGFnLWRlbGV0ZS1saW5rXCI+J1xuICAgICcgICAgICAgIDxpIGNsYXNzPVwiZnMgZnMtY3Jvc3MzXCI+PC9pPiBEZWxldGUnXG4gICAgJyAgICAgIDwvYT4nXG4gICAgJyAgICA8L3NwYW4+J1xuICAgICcgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWRpYWxvZ1wiPidcbiAgICAnICAgICAgICB7eyNpbWFnZX19J1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctaW1hZ2VcIj4nXG4gICAgJyAgICAgICAgICA8aW1nIHNyYz1cInt7aW1hZ2V9fVwiPidcbiAgICAnICAgICAgICA8L2Rpdj4nXG4gICAgJyAgICAgICAge3svaW1hZ2V9fSdcbiAgICAnICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLXRleHRcIj4nXG4gICAgJyAgICAgICAgICA8aDIgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctdGl0bGVcIj57e2xhYmVsfX08L2gyPidcbiAgICAnICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctcHJpY2VcIj57e3ByaWNlfX08L2Rpdj4nXG4gICAgJyAgICAgICAgICA8cCBjbGFzcz1cInRhZ2xhLWRpYWxvZy1kZXNjcmlwdGlvblwiPnt7ZGVzY3JpcHRpb259fTwvcD4nXG4gICAgJyAgICAgICAgICA8YSBocmVmPVwie3t1cmx9fVwiIGNsYXNzPVwidGFnbGEtZGlhbG9nLWJ1dHRvbiBzdC1idG4gc3QtYnRuLXN1Y2Nlc3Mgc3QtYnRuLXNvbGlkXCI+J1xuICAgICcgICAgICAgICAgICA8aSBjbGFzcz1cImZzIGZzLWNhcnRcIj48L2k+J1xuICAgICcgICAgICAgICAgICBCdXkgTm93J1xuICAgICcgICAgICAgICAgPC9hPidcbiAgICAnICAgICAgICA8L2Rpdj4nXG4gICAgJyAgICA8L2Rpdj4nXG4gICAgJyAgICA8Zm9ybSBjbGFzcz1cInRhZ2xhLWZvcm1cIj4nXG4gICAgJyAgICAgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWZvcm0tdGl0bGVcIj4nXG4gICAgJyAgICAgICAgICBTZWxlY3QgWW91ciBQcm9kdWN0J1xuICAgICcgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInRhZ2xhLWZvcm0tY2xvc2VcIj7DlzwvYT4nXG4gICAgJyAgICAgICAgPC9kaXY+J1xuICAgICcgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInhcIj4nXG4gICAgJyAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwieVwiPidcbiAgICAnICAgICAgICA8c2VsZWN0IGRhdGEtcGxhY2Vob2xkZXI9XCJTZWFyY2hcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJ0YWdcIiBjbGFzcz1cInRhZ2xhLXNlbGVjdCBjaG9zZW4tc2VsZWN0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2hcIj4nXG4gICAgJyAgICAgICAgICAgIDxvcHRpb24+PC9vcHRpb24+J1xuICAgICcgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPkNvY2tpZTwvb3B0aW9uPidcbiAgICAnICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjJcIj5LaXdpPC9vcHRpb24+J1xuICAgICcgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiM1wiPkJ1ZGR5PC9vcHRpb24+J1xuICAgICcgICAgICAgIDwvc2VsZWN0PidcbiAgICAnICAgIDwvZm9ybT4nXG4gICAgJzwvZGl2PidcbiAgXS5qb2luKCdcXG4nKVxuICBORVdfVEFHX1RFTVBMQVRFOiBbXG4gICAgJzxkaXYgY2xhc3M9XCJ0YWdsYS10YWdcIj4nXG4gICAgJyAgICA8aSBjbGFzcz1cInRhZ2xhLWljb24gZnMgZnMtdGFnXCI+PC9pPidcbiAgICAnICAgIDxzcGFuIGNsYXNzPVwidGFnbGEtbGFiZWxcIj57e2xhYmVsfX08L3NwYW4+J1xuICAgICc8L2Rpdj4nXG4gIF0uam9pbignXFxuJylcblxuY2xhc3MgVGFnbGEgZXh0ZW5kcyBTdGFja2xhLkJhc2VcbiAgY29uc3RydWN0b3I6ICgkd3JhcHBlciwgb3B0aW9ucyA9IHt9KSAtPlxuICAgIHN1cGVyKClcbiAgICBAd3JhcHBlciA9ICQoJHdyYXBwZXIpXG4gICAgQGluaXQob3B0aW9ucylcbiAgICBAYmluZCgpXG5cbiQuZXh0ZW5kKFRhZ2xhLCBBVFRSUylcblxucHJvdG8gPVxuICAjIyMjIyMjIyMjIyMjI1xuICAjIFV0aWxpdGllc1xuICAjIyMjIyMjIyMjIyMjI1xuICBmb3JtYXRGbG9hdDogKG51bSwgcG9zKSAtPlxuICAgIHNpemUgPSBNYXRoLnBvdygxMCwgcG9zKVxuICAgIE1hdGgucm91bmQobnVtICogc2l6ZSkgLyBzaXplXG4gIHRvU3RyaW5nOiAtPiAnVGFnbGEnXG5cbiAgIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgUHJpdmF0ZSBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIEluaXRpYWxpemUgZHJhZyBhbmQgc2VsZWN0IGxpYnMgZm9yIGEgc2luZ2xlIHRhZ1xuICBfYXBwbHlUb29sczogKCR0YWcpIC0+XG4gICAgZHJhZyA9IG5ldyBEcmFnZ2FiaWxseSgkdGFnWzBdLCBUYWdsYS5EUkFHX0FUVFIpXG4gICAgZHJhZy5vbiAnZHJhZ0VuZCcsICQucHJveHkoQGhhbmRsZVRhZ01vdmUsIEApXG4gICAgZHJhZy5kaXNhYmxlKClcbiAgICAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JywgZHJhZylcbiAgICAjIFVwZGF0ZSBmb3JtXG4gICAgdGFnID0gJHRhZy5kYXRhKCd0YWctZGF0YScpXG4gICAgJGZvcm0gPSAkdGFnLmZpbmQoJy50YWdsYS1mb3JtJylcbiAgICAkZm9ybS5maW5kKCdbbmFtZT14XScpLnZhbCh0YWcueClcbiAgICAkZm9ybS5maW5kKCdbbmFtZT15XScpLnZhbCh0YWcueSlcbiAgICAkZm9ybS5maW5kKFwiW25hbWU9dGFnXSBvcHRpb25bdmFsdWU9I3t0YWcudmFsdWV9XVwiKS5hdHRyKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpXG4gICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JykuY2hvc2VuKFRhZ2xhLlNFTEVDVF9BVFRSKVxuICAgICR0YWcuZmluZCgnLnRhZ2xhLXNlbGVjdCcpLm9uKCdjaGFuZ2UnLCAkLnByb3h5KEBoYW5kbGVUYWdDaGFuZ2UsIEApKVxuXG4gIF9yZW1vdmVUb29sczogKCR0YWcpIC0+XG4gICAgJHRhZy5kYXRhKCdkcmFnZ2FiaWxseScpLmRlc3Ryb3koKVxuICAgICRzZWxlY3QgPSAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKVxuICAgICRzZWxlY3Quc2hvdygpLnJlbW92ZUNsYXNzICdjaHpuLWRvbmUnXG4gICAgJHNlbGVjdC5uZXh0KCkucmVtb3ZlKClcblxuICBfZ2V0UG9zaXRpb246ICgkdGFnKSAtPlxuICAgIEBsb2cgJ19nZXRQb3NpdGlvbigpIGlzIGV4ZWN1dGVkJ1xuICAgIHBvcyA9ICR0YWcucG9zaXRpb24oKVxuICAgIHggPSAocG9zLmxlZnQgKyAoJHRhZy53aWR0aCgpIC8gMikpIC8gQGN1cnJlbnRXaWR0aCAqIEBuYXR1cmFsV2lkdGhcbiAgICB5ID0gKHBvcy50b3AgKyAoJHRhZy5oZWlnaHQoKSAvIDIpKSAvIEBjdXJyZW50SGVpZ2h0ICogQG5hdHVyYWxXaWR0aFxuICAgIGlmIEB1bml0IGlzICdwZXJjZW50J1xuICAgICAgeCA9IHggLyBAbmF0dXJhbFdpZHRoICogMTAwXG4gICAgICB5ID0geSAvIEBuYXR1cmFsSGVpZ2h0ICogMTAwXG4gICAgcmV0dXJuIFt4LCB5XVxuXG4gIF91cGRhdGVJbWFnZVNpemU6IChkYXRhKSAtPlxuICAgIEBsb2cgJ191cGRhdGVJbWFnZVNpemUoKSBpcyBleGVjdXRlZCdcbiAgICB0cnlcbiAgICAgIEBuYXR1cmFsV2lkdGggPSBkYXRhLm5hdHVyYWxXaWR0aFxuICAgICAgQG5hdHVyYWxIZWlnaHQgPSBkYXRhLm5hdHVyYWxIZWlnaHRcbiAgICAgIEBjdXJyZW50V2lkdGggPSBkYXRhLndpZHRoXG4gICAgICBAY3VycmVudEhlaWdodCA9IGRhdGEuaGVpZ2h0XG4gICAgICBAd2lkdGhSYXRpbyA9IGRhdGEud2lkdGhSYXRpb1xuICAgICAgQGhlaWdodFJhdGlvID0gZGF0YS5oZWlnaHRSYXRpb1xuICAgIGNhdGNoIGVycm9yXG4gICAgICBkZWJ1Z2dlclxuICAgICAgY29uc29sZS5lcnJvciAgZXJyb3JcblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIEV2ZW50IEhhbmRsZXJzXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gIGhhbmRsZVRhZ0NsaWNrOiAoZSkgLT5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgcmV0dXJuIHVubGVzcyAkKGUudGFyZ2V0KS5oYXNDbGFzcygndGFnbGEtaWNvbicpXG4gICAgQGxvZyAnaGFuZGxlVGFnQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICAkdGFnID0gJChlLmN1cnJlbnRUYXJnZXQpXG4gICAgQHNocmluaygkdGFnKVxuICAgICR0YWcuYWRkQ2xhc3MoJ3RhZ2xhLXRhZy1hY3RpdmUnKVxuICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5lbmFibGUoKVxuXG4gIGhhbmRsZVRhZ0NoYW5nZTogKGUsIHBhcmFtcykgLT5cbiAgICBAbG9nICdoYW5kbGVUYWdDaGFuZ2UoKSBpcyBleGVjdXRlZCdcbiAgICAkc2VsZWN0ID0gJChlLnRhcmdldClcbiAgICAkdGFnID0gJHNlbGVjdC5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLnJlbW92ZUNsYXNzICd0YWdsYS10YWctY2hvb3NlIHRhZ2xhLXRhZy1hY3RpdmUnXG4gICAgZGF0YSA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgIGRhdGEubGFiZWwgPSAkc2VsZWN0LmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnRleHQoKVxuICAgIGRhdGEudmFsdWUgPSAkc2VsZWN0LnZhbCgpIHx8IGRhdGEubGFiZWxcbiAgICBzZXJpYWxpemUgPSAkdGFnLmZpbmQoJy50YWdsYS1mb3JtJykuc2VyaWFsaXplKClcbiAgICBAZW1pdCgnY2hhbmdlJywgW2RhdGEsIHNlcmlhbGl6ZSwgJHRhZ10pXG5cbiAgaGFuZGxlVGFnRGVsZXRlOiAoZSkgLT5cbiAgICBAbG9nICdoYW5kbGVUYWdEZWxldGUoKSBpcyBleGVjdXRlZCdcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAkdGFnID0gJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy50YWdsYS10YWcnKVxuICAgICR0YWcucmVtb3ZlKClcbiAgICBpbnN0YW5jZSA9ICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKVxuICAgIGluc3RhbmNlLmRlc3Ryb3koKSBpZiAoaW5zdGFuY2UpXG4gICAgZGF0YSA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgIEBlbWl0KCdkZWxldGUnLCBbZGF0YV0pXG5cbiAgaGFuZGxlVGFnRWRpdDogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnRGVsZXRlKCkgaXMgZXhlY3V0ZWQnXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKS50cmlnZ2VyKCdjaG9zZW46b3BlbicpXG4gICAgQGVtaXQoJ3RhZ2xhOmVkaXQnLCBbJHRhZy5kYXRhKCd0YWctZGF0YScpXSlcblxuICBoYW5kbGVUYWdNb3ZlOiAoaW5zdGFuY2UsIGV2ZW50LCBwb2ludGVyKSAtPlxuICAgIEBsb2cgJ2hhbmRsZVRhZ01vdmUoKSBpcyBleGVjdXRlZCdcblxuICAgICR0YWcgPSAkKGluc3RhbmNlLmVsZW1lbnQpXG4gICAgZGF0YSA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgIHBvcyA9IEBfZ2V0UG9zaXRpb24oJHRhZylcbiAgICBkYXRhLnggPSBwb3NbMF1cbiAgICBkYXRhLnkgPSBwb3NbMV1cblxuICAgICRmb3JtID0gJHRhZy5maW5kKCcudGFnbGEtZm9ybScpXG4gICAgJGZvcm0uZmluZCgnW25hbWU9eF0nKS52YWwoZGF0YS54KVxuICAgICRmb3JtLmZpbmQoJ1tuYW1lPXldJykudmFsKGRhdGEueSlcbiAgICBzZXJpYWxpemUgPSAkdGFnLmZpbmQoJy50YWdsYS1mb3JtJykuc2VyaWFsaXplKClcblxuICAgIEBlbWl0KCdtb3ZlJywgW2RhdGEsIHNlcmlhbGl6ZSwgJHRhZ10pXG5cbiAgaGFuZGxlV3JhcHBlckNsaWNrOiAoZSkgLT5cbiAgICBAbG9nICdoYW5kbGVXcmFwcGVyQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICBAc2hyaW5rKClcblxuICBoYW5kbGVJbWFnZVJlc2l6ZTogKGUsIGRhdGEpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VSZXNpemUoKSBpcyBleGVjdXRlZCdcbiAgICBwcmV2V2lkdGggPSBAY3VycmVudFdpZHRoXG4gICAgcHJldkhlaWdodCA9IEBjdXJyZW50SGVpZ2h0XG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT5cbiAgICAgICR0YWcgPSAkKEApXG4gICAgICBwb3MgPSAkdGFnLnBvc2l0aW9uKClcbiAgICAgIHggPSAocG9zLmxlZnQgLyBwcmV2V2lkdGgpICogZGF0YS53aWR0aFxuICAgICAgeSA9IChwb3MudG9wIC8gcHJldkhlaWdodCkgKiBkYXRhLmhlaWdodFxuICAgICAgJHRhZy5jc3NcbiAgICAgICAgbGVmdDogXCIje3h9cHhcIlxuICAgICAgICB0b3A6IFwiI3t5fXB4XCJcbiAgICBAX3VwZGF0ZUltYWdlU2l6ZShkYXRhKVxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgUHVibGljIE1ldGhvZHNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgYWRkVGFnOiAodGFnID0ge30pIC0+XG4gICAgQGxvZyAnYWRkVGFnKCkgaXMgZXhlY3V0ZWQnXG4gICAgIyBSZW5kZXIgdGFnIGVsZW1lbnQgYnkgcHJvdmlkZWQgdGVtcGxhdGVcbiAgICAkdGFnID0gJChNdXN0YWNoZS5yZW5kZXIoQHRhZ1RlbXBsYXRlLCB0YWcpKVxuICAgIGlzTmV3ID0gJC5pc0VtcHR5T2JqZWN0KHRhZylcbiAgICBAd3JhcHBlci5hcHBlbmQoJHRhZylcbiAgICAjIERlZmF1bHQgcG9zaXRpb24gZm9yIG5ldyB0YWdcbiAgICBpZiBpc05ld1xuICAgICAgdGFnLnggPSA1MFxuICAgICAgdGFnLnkgPSA1MFxuICAgICAgJHRhZy5hZGRDbGFzcyAndGFnbGEtdGFnLW5ldyB0YWdsYS10YWctYWN0aXZlIHRhZ2xhLXRhZy1jaG9vc2UnXG4gICAgaWYgQHVuaXQgaXMgJ3BlcmNlbnQnXG4gICAgICB4ID0gQGN1cnJlbnRXaWR0aCAqICh0YWcueCAvIDEwMClcbiAgICAgIHkgPSBAY3VycmVudEhlaWdodCAqICh0YWcueSAvIDEwMClcbiAgICBlbHNlXG4gICAgICB4ID0gdGFnLnggKiBAd2lkdGhSYXRpb1xuICAgICAgeSA9IHRhZy55ICogQGhlaWdodFJhdGlvXG4gICAgb2Zmc2V0WCA9ICR0YWcub3V0ZXJXaWR0aCgpIC8gMlxuICAgIG9mZnNldFkgPSAkdGFnLm91dGVySGVpZ2h0KCkgLyAyXG4gICAgJHRhZy5jc3NcbiAgICAgIGxlZnQ6IFwiI3t4IC0gb2Zmc2V0WH1weFwiXG4gICAgICB0b3A6IFwiI3t5IC0gb2Zmc2V0WX1weFwiXG4gICAgIyBTYXZlIHRhZyBkYXRhIHRvIGRhdGEgYXR0ciBmb3IgZWFzeSBhY2Nlc3NcbiAgICAkdGFnLmRhdGEoJ3RhZy1kYXRhJywgdGFnKVxuICAgICMgUmVuZGVyIHRhZyBlZGl0b3IgdG9vbHNcbiAgICBpZiBAZWRpdG9yXG4gICAgICBAX2FwcGx5VG9vbHMoJHRhZylcbiAgICAgIGlmIGlzTmV3XG4gICAgICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5lbmFibGUoKVxuICAgICAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAgICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JykudHJpZ2dlcignY2hvc2VuOm9wZW4nKVxuXG4gIGRlbGV0ZVRhZzogKCR0YWcpIC0+XG4gICAgQGxvZyAnZGVsZXRlVGFnKCkgaXMgZXhlY3V0ZWQnXG5cbiAgZWRpdDogLT5cbiAgICByZXR1cm4gaWYgQGVkaXRvciBpcyBvblxuICAgIEBsb2cgJ2VkaXQoKSBpcyBleGVjdXRlZCdcbiAgICBAd3JhcHBlci5hZGRDbGFzcygndGFnbGEtZWRpdGluZycpXG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT4gQF9hcHBseVRvb2xzKCQoQCkpXG4gICAgQGVkaXRvciA9IG9uXG5cbiAgc2hyaW5rOiAoJGV4Y2VwdCA9IG51bGwpIC0+XG4gICAgcmV0dXJuIGlmIEBlZGl0b3IgaXMgb2ZmXG4gICAgQGxvZyAnc2hyaW5rKCkgaXMgZXhlY3V0ZWQnXG4gICAgJGV4Y2VwdCA9ICQoJGV4Y2VwdClcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAtPlxuICAgICAgcmV0dXJuIGlmICRleGNlcHRbMF0gaXMgQFxuICAgICAgJHRhZyA9ICQoQClcbiAgICAgICNhbGVydCAkdGFnLmZpbmQoJ1tuYW1lPXRhZ10nKS52YWwoKVxuICAgICAgaWYgJHRhZy5oYXNDbGFzcygndGFnbGEtdGFnLW5ldycpIGFuZCAhJHRhZy5maW5kKCdbbmFtZT10YWddJykudmFsKClcbiAgICAgICAgJHRhZy5yZW1vdmUoKVxuICAgICAgJHRhZy5yZW1vdmVDbGFzcyAndGFnbGEtdGFnLWFjdGl2ZSB0YWdsYS10YWctY2hvb3NlJ1xuICAgICAgJHRhZy5kYXRhKCdkcmFnZ2FiaWxseScpLmRpc2FibGUoKVxuXG4gIHVwZGF0ZURpYWxvZzogKCR0YWcsIGRhdGEpIC0+XG4gICAgaHRtbCA9ICQoTXVzdGFjaGUucmVuZGVyKEB0YWdUZW1wbGF0ZSwgZGF0YSkpLmZpbmQoJy50YWdsYS1kaWFsb2cnKS5odG1sKClcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1kaWFsb2cnKS5odG1sKGh0bWwpXG4gICAgJHRhZy5kYXRhKCd0YWctZGF0YScsIGRhdGEpXG5cbiAgdW5lZGl0OiAtPlxuICAgIHJldHVybiBpZiBAZWRpdCBpcyBvZmZcbiAgICBAbG9nICd1bmVkaXQoKSBpcyBleGVjdXRlZCdcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAtPiBAX3JlbW92ZVRvb2xzKCQoQCkpXG4gICAgQHdyYXBwZXIucmVtb3ZlQ2xhc3MgJ3RhZ2xhLWVkaXRpbmcnXG4gICAgQGVkaXRvciA9IG9mZlxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgTGlmZWN5Y2xlIE1ldGhvZHNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgaW5pdDogKG9wdGlvbnMpIC0+XG4gICAgIyBDb25maWd1cmUgT3B0aW9uc1xuICAgIEBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IFtdXG4gICAgQGVkaXRvciA9IChvcHRpb25zLmVkaXRvciBpcyBvbikgPyBvbiA6IGZhbHNlXG4gICAgQGZvcm0gPSBpZiBvcHRpb25zLmZvcm0gdGhlbiAkKG9wdGlvbnMuZm9ybSkgZWxzZSBUYWdsYS5GT1JNX1RFTVBMQVRFXG4gICAgQHRhZ1RlbXBsYXRlID0gaWYgb3B0aW9ucy50YWdUZW1wbGF0ZSB0aGVuICQob3B0aW9ucy50YWdUZW1wbGF0ZSkuaHRtbCgpIGVsc2UgVGFnbGEuVEFHX1RFTVBMQVRFXG4gICAgQHVuaXQgPSBpZiBvcHRpb25zLnVuaXQgaXMgJ3BlcmNlbnQnIHRoZW4gJ3BlcmNlbnQnIGVsc2UgJ3BpeGVsJ1xuICAgICMgQXR0cmlidXRlc1xuICAgIEBpbWFnZVNpemUgPSBudWxsXG4gICAgQGltYWdlID0gQHdyYXBwZXIuZmluZCgnaW1nJylcblxuICBiaW5kOiAtPlxuICAgIEBsb2cgJ2JpbmQoKSBpcyBleGVjdXRlZCdcbiAgICBAd3JhcHBlclxuICAgICAgLm9uICdtb3VzZWVudGVyJywgJC5wcm94eShAaGFuZGxlTW91c2VFbnRlciwgQClcbiAgICAgIC5vbiAnY2xpY2snLCAkLnByb3h5KEBoYW5kbGVXcmFwcGVyQ2xpY2ssIEApXG4gICAgICAub24gJ2NsaWNrJywgJy50YWdsYS10YWcnLCAkLnByb3h5KEBoYW5kbGVUYWdDbGljaywgQClcbiAgICAgIC5vbiAnY2xpY2snLCAnLnRhZ2xhLXRhZy1lZGl0LWxpbmsnLCAkLnByb3h5KEBoYW5kbGVUYWdFZGl0LCBAKVxuICAgICAgLm9uICdjbGljaycsICcudGFnbGEtdGFnLWRlbGV0ZS1saW5rJywgJC5wcm94eShAaGFuZGxlVGFnRGVsZXRlLCBAKVxuXG4gIHJlbmRlckZuOiAoc3VjY2VzcywgZGF0YSkgLT5cbiAgICAjIFN0b3AgaWYgaW1hZ2UgaXMgZmFpbGVkIHRvIGxvYWRcbiAgICB1bmxlc3Mgc3VjY2Vzc1xuICAgICAgQGxvZyhcIkZhaWxlZCB0byBsb2FkIGltYWdlOiAje0BpbWFnZS5hdHRyKCdzcmMnKX1cIiwgJ2Vycm9yJylcbiAgICAgIEBkZXN0cm95KClcbiAgICAgIHJldHVyblxuICAgICMgU2F2ZSBkaW1lbnNpb25cbiAgICBAX3VwZGF0ZUltYWdlU2l6ZShkYXRhKVxuICAgICMgQXBwbHkgbmVjZXNzYXJ5IGNsYXNzIG5hbWVzXG4gICAgQHdyYXBwZXIuYWRkQ2xhc3MgJ3RhZ2xhJ1xuICAgIEB3cmFwcGVyLmFkZENsYXNzICd0YWdsYS1lZGl0aW5nJyBpZiBAZWRpdG9yXG4gICAgIyBDcmVhdGUgdGFnc1xuICAgIEBhZGRUYWcgdGFnIGZvciB0YWcgaW4gQGRhdGFcblxuICByZW5kZXI6IC0+XG4gICAgQGxvZyAncmVuZGVyKCkgaXMgZXhlY3V0ZWQnXG4gICAgQGltYWdlU2l6ZSA9IFN0YWNrbGEuZ2V0SW1hZ2VTaXplKEBpbWFnZSwgJC5wcm94eShAcmVuZGVyRm4sIEApKVxuICAgIEBpbWFnZVNpemUub24oJ2NoYW5nZScsICQucHJveHkoQGhhbmRsZUltYWdlUmVzaXplLCBAKSlcblxuICBkZXN0cm95OiAtPlxuICAgIEBsb2cgJ2Rlc3Ryb3koKSBpcyBleGVjdXRlZCdcblxuJC5leHRlbmQoVGFnbGE6OiwgcHJvdG8pXG5cbndpbmRvdy5TdGFja2xhID0ge30gdW5sZXNzIHdpbmRvdy5TdGFja2xhXG53aW5kb3cuU3RhY2tsYS5UYWdsYSA9IFRhZ2xhXG5cbiJdfQ==