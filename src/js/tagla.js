(function() {
  var ATTRS, Tagla, proto,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __hasProp = {}.hasOwnProperty;

  ATTRS = {
    NAME: 'Tagla',
    PREFIX: 'tagla-',
    DRAG_ATTR: {
      containment: '.tagla',
      handle: '.tagla-icon'
    },
    SELECT_ATTR: {
      allow_single_deselect: true,
      placeholder_text_single: 'Select an option',
      width: '310px'
    },
    FORM_TEMPLATE: [].join('\n'),
    TAG_TEMPLATE: ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <div class="tagla-dialog">', '        {{#image}}', '        <div class="tagla-dialog-image">', '          <img src="{{image}}">', '        </div>', '        {{/image}}', '        <div class="tagla-dialog-text">', '          <div class="tagla-dialog-edit">', '            <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-edit-link">', '              <i class="fs fs-pencil"></i> Edit', '            </a>', '            <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-delete-link">', '              <i class="fs fs-cross3"></i> Delete', '            </a>', '          </div>', '          <h2 class="tagla-dialog-title">{{label}}</h2>', '          <div class="tagla-dialog-price">{{price}}</div>', '          <p class="tagla-dialog-description">{{description}}</p>', '          <a href="{{url}}" class="tagla-dialog-button st-btn st-btn-success st-btn-solid">', '            <i class="fs fs-cart"></i>', '            Buy Now', '          </a>', '        </div>', '    </div>', '    <form class="tagla-form">', '        <div class="tagla-form-title">', '          Select Your Product', '          <a href="javascript:void(0);" class="tagla-form-close">Ã—</a>', '        </div>', '        <input type="hidden" name="x">', '        <input type="hidden" name="y">', '        <select data-placeholder="Search" type="text" name="tag" class="tagla-select chosen-select" placeholder="Search">', '            <option></option>', '            <option value="1">Cockie</option>', '            <option value="2">Kiwi</option>', '            <option value="3">Buddy</option>', '        </select>', '    </form>', '</div>'].join('\n'),
    NEW_TAG_TEMPLATE: ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">{{label}}</span>', '</div>'].join('\n')
  };

  Tagla = (function(_super) {
    __extends(Tagla, _super);

    function Tagla($wrapper, options) {
      if (options == null) {
        options = {};
      }
      Tagla.__super__.constructor.call(this);
      this.wrapper = $($wrapper);
      this.init(options);
      this.bind();
    }

    return Tagla;

  })(Stackla.Base);

  $.extend(Tagla, ATTRS);

  proto = {
    formatFloat: function(num, pos) {
      var size;
      size = Math.pow(10, pos);
      return Math.round(num * size) / size;
    },
    toString: function() {
      return 'Tagla';
    },
    _applyTools: function($tag) {
      var $form, $select, drag, tag;
      drag = new Draggabilly($tag[0], Tagla.DRAG_ATTR);
      drag.on('dragEnd', $.proxy(this.handleTagMove, this));
      $tag.data('draggabilly', drag);
      tag = $tag.data('tag-data');
      $form = $tag.find('.tagla-form');
      $form.find('[name=x]').val(tag.x);
      $form.find('[name=y]').val(tag.y);
      $form.find("[name=tag] option[value=" + tag.value + "]").attr('selected', 'selected');
      $select = $tag.find('.tagla-select');
      $select.chosen(Tagla.SELECT_ATTR);
      $select.on('change', $.proxy(this.handleTagChange, this));
      return $select.on('chosen:hiding_dropdown', function(e, params) {
        return $select.trigger('chosen:open');
      });
    },
    _removeTools: function($tag) {
      var $select;
      $tag.data('draggabilly').destroy();
      $select = $tag.find('.tagla-select');
      $select.show().removeClass('chzn-done');
      return $select.next().remove();
    },
    _getPosition: function($tag) {
      var pos, x, y;
      this.log('_getPosition() is executed');
      pos = $tag.position();
      x = (pos.left + ($tag.width() / 2)) / this.currentWidth * this.naturalWidth;
      y = (pos.top + ($tag.height() / 2)) / this.currentHeight * this.naturalWidth;
      if (this.unit === 'percent') {
        x = x / this.naturalWidth * 100;
        y = y / this.naturalHeight * 100;
      }
      return [x, y];
    },
    _updateImageSize: function(data) {
      this.log('_updateImageSize() is executed');
      this.naturalWidth = data.naturalWidth;
      this.naturalHeight = data.naturalHeight;
      this.currentWidth = data.width;
      this.currentHeight = data.height;
      this.widthRatio = data.widthRatio;
      return this.heightRatio = data.heightRatio;
    },
    handleTagClick: function(e) {
      var $tag;
      e.preventDefault();
      e.stopPropagation();
      if (!$(e.target).hasClass('tagla-icon')) {
        return;
      }
      this.log('handleTagClick() is executed');
      $tag = $(e.currentTarget);
      this.shrink($tag);
      $tag.addClass('tagla-tag-active');
      return $tag.data('draggabilly').enable();
    },
    handleTagChange: function(e, params) {
      var $select, $tag, data, serialize;
      this.log('handleTagChange() is executed');
      $select = $(e.target);
      $tag = $select.parents('.tagla-tag');
      $tag.removeClass('tagla-tag-choose tagla-tag-active');
      data = $tag.data('tag-data');
      data.label = $select.find('option:selected').text();
      data.value = $select.val() || data.label;
      serialize = $tag.find('.tagla-form').serialize();
      return this.emit('change', [data, serialize, $tag]);
    },
    handleTagDelete: function(e) {
      var $tag, data, instance;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.remove();
      instance = $tag.data('draggabilly');
      if (instance) {
        instance.destroy();
      }
      data = $tag.data('tag-data');
      return this.emit('delete', [data]);
    },
    handleTagEdit: function(e) {
      var $tag;
      this.log('handleTagEdit() is executed');
      e.preventDefault();
      e.stopPropagation();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.addClass('tagla-tag-choose');
      this.wrapper.addClass('tagla-editing-selecting');
      $tag.find('.tagla-select').trigger('chosen:open');
      return this.emit('edit', [$tag.data('tag-data')]);
    },
    handleTagMove: function(instance, event, pointer) {
      var $form, $tag, data, pos, serialize;
      this.log('handleTagMove() is executed');
      $tag = $(instance.element);
      data = $tag.data('tag-data');
      pos = this._getPosition($tag);
      data.x = pos[0];
      data.y = pos[1];
      $form = $tag.find('.tagla-form');
      $form.find('[name=x]').val(data.x);
      $form.find('[name=y]').val(data.y);
      serialize = $tag.find('.tagla-form').serialize();
      this.lastDragTime = new Date();
      return this.emit('move', [data, serialize, $tag]);
    },
    handleWrapperClick: function(e) {
      this.log('handleWrapperClick() is executed');
      if (new Date() - this.lastDragTime > 10) {
        return this.shrink();
      }
    },
    handleImageResize: function(e, data) {
      var prevHeight, prevWidth;
      this.log('handleImageResize() is executed');
      prevWidth = this.currentWidth;
      prevHeight = this.currentHeight;
      $('.tagla-tag').each(function() {
        var $tag, pos, x, y;
        $tag = $(this);
        pos = $tag.position();
        x = (pos.left / prevWidth) * data.width;
        y = (pos.top / prevHeight) * data.height;
        return $tag.css({
          left: x + "px",
          top: y + "px"
        });
      });
      return this._updateImageSize(data);
    },
    addTag: function(tag) {
      var $tag, isNew, offsetX, offsetY, x, y;
      if (tag == null) {
        tag = {};
      }
      this.log('addTag() is executed');
      $tag = $(Mustache.render(this.tagTemplate, tag));
      isNew = $.isEmptyObject(tag);
      this.wrapper.append($tag);
      if (isNew) {
        tag.x = 50;
        tag.y = 50;
        $tag.addClass('tagla-tag-new tagla-tag-active tagla-tag-choose');
      }
      if (this.unit === 'percent') {
        x = this.currentWidth * (tag.x / 100);
        y = this.currentHeight * (tag.y / 100);
      } else {
        x = tag.x * this.widthRatio;
        y = tag.y * this.heightRatio;
      }
      offsetX = $tag.outerWidth() / 2;
      offsetY = $tag.outerHeight() / 2;
      $tag.css({
        left: (x - offsetX) + "px",
        top: (y - offsetY) + "px"
      });
      $tag.data('tag-data', tag);
      if (this.editor) {
        this._applyTools($tag);
        if (isNew) {
          $tag.data('draggabilly').enable();
          $tag.addClass('tagla-tag-choose');
          return setTimeout((function(_this) {
            return function() {
              _this.wrapper.addClass('tagla-editing-selecting');
              return $tag.find('.tagla-select').trigger('chosen:open');
            };
          })(this), 100);
        }
      }
    },
    deleteTag: function($tag) {
      return this.log('deleteTag() is executed');
    },
    edit: function() {
      if (this.editor === true) {
        return;
      }
      this.log('edit() is executed');
      this.wrapper.addClass('tagla-editing');
      $('.tagla-tag').each(function() {
        return this._applyTools($(this));
      });
      return this.editor = true;
    },
    shrink: function($except) {
      if ($except == null) {
        $except = null;
      }
      if (this.editor === false) {
        return;
      }
      this.log('shrink() is executed');
      $except = $($except);
      this.wrapper.removeClass('tagla-editing-selecting');
      return $('.tagla-tag').each(function() {
        var $tag;
        if ($except[0] === this) {
          return;
        }
        $tag = $(this);
        if ($tag.hasClass('tagla-tag-new') && !$tag.find('[name=tag]').val()) {
          $tag.remove();
        }
        return $tag.removeClass('tagla-tag-active tagla-tag-choose');
      });
    },
    updateDialog: function($tag, data) {
      var html;
      html = $(Mustache.render(this.tagTemplate, data)).find('.tagla-dialog').html();
      $tag.find('.tagla-dialog').html(html);
      return $tag.data('tag-data', data);
    },
    unedit: function() {
      if (this.edit === false) {
        return;
      }
      this.log('unedit() is executed');
      $('.tagla-tag').each(function() {
        return this._removeTools($(this));
      });
      this.wrapper.removeClass('tagla-editing');
      return this.editor = false;
    },
    init: function(options) {
      var _ref;
      this.data = options.data || [];
      this.editor = (_ref = options.editor === true) != null ? _ref : {
        on: false
      };
      this.form = options.form ? $(options.form) : Tagla.FORM_TEMPLATE;
      this.tagTemplate = options.tagTemplate ? $(options.tagTemplate).html() : Tagla.TAG_TEMPLATE;
      this.unit = options.unit === 'percent' ? 'percent' : 'pixel';
      this.imageSize = null;
      this.image = this.wrapper.find('img');
      return this.lastDragTime = new Date();
    },
    bind: function() {
      this.log('bind() is executed');
      return this.wrapper.on('mouseenter', $.proxy(this.handleMouseEnter, this)).on('click', $.proxy(this.handleWrapperClick, this)).on('click', '.tagla-tag-edit-link', $.proxy(this.handleTagEdit, this)).on('click', '.tagla-tag-delete-link', $.proxy(this.handleTagDelete, this));
    },
    renderFn: function(success, data) {
      var tag, _i, _len, _ref, _results;
      if (!success) {
        this.log("Failed to load image: " + (this.image.attr('src')), 'error');
        this.destroy();
        return;
      }
      this._updateImageSize(data);
      this.wrapper.addClass('tagla');
      if (this.editor) {
        this.wrapper.addClass('tagla-editing');
      }
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        tag = _ref[_i];
        _results.push(this.addTag(tag));
      }
      return _results;
    },
    render: function() {
      this.log('render() is executed');
      this.imageSize = Stackla.getImageSize(this.image, $.proxy(this.renderFn, this));
      return this.imageSize.on('change', $.proxy(this.handleImageResize, this));
    },
    destroy: function() {
      return this.log('destroy() is executed');
    }
  };

  $.extend(Tagla.prototype, proto);

  if (!window.Stackla) {
    window.Stackla = {};
  }

  window.Stackla.Tagla = Tagla;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LElBQUMsQ0FBQSxHQUFELENBQU0sdUJBQU4sRUFETztJQUFBLENBcFBUO0dBM0VGLENBQUE7O0FBQUEsRUFrVUEsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxLQUFLLENBQUEsU0FBZCxFQUFrQixLQUFsQixDQWxVQSxDQUFBOztBQW9VQSxFQUFBLElBQUEsQ0FBQSxNQUFpQyxDQUFDLE9BQWxDO0FBQUEsSUFBQSxNQUFNLENBQUMsT0FBUCxHQUFpQixFQUFqQixDQUFBO0dBcFVBOztBQUFBLEVBcVVBLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBZixHQUF1QixLQXJVdkIsQ0FBQTtBQUFBIiwiZmlsZSI6InRhZ2xhLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiQVRUUlMgPVxuICBOQU1FOiAnVGFnbGEnXG4gIFBSRUZJWDogJ3RhZ2xhLSdcbiAgRFJBR19BVFRSOlxuICAgIGNvbnRhaW5tZW50OiAnLnRhZ2xhJ1xuICAgIGhhbmRsZTogJy50YWdsYS1pY29uJ1xuICBTRUxFQ1RfQVRUUjpcbiAgICBhbGxvd19zaW5nbGVfZGVzZWxlY3Q6IG9uXG4gICAgcGxhY2Vob2xkZXJfdGV4dF9zaW5nbGU6ICdTZWxlY3QgYW4gb3B0aW9uJ1xuICAgIHdpZHRoOiAnMzEwcHgnXG4gIEZPUk1fVEVNUExBVEU6IFtcbiAgXS5qb2luKCdcXG4nKVxuICBUQUdfVEVNUExBVEU6IFtcbiAgICAnPGRpdiBjbGFzcz1cInRhZ2xhLXRhZ1wiPidcbiAgICAnICAgIDxpIGNsYXNzPVwidGFnbGEtaWNvbiBmcyBmcy10YWdcIj48L2k+J1xuICAgICcgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWRpYWxvZ1wiPidcbiAgICAnICAgICAgICB7eyNpbWFnZX19J1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctaW1hZ2VcIj4nXG4gICAgJyAgICAgICAgICA8aW1nIHNyYz1cInt7aW1hZ2V9fVwiPidcbiAgICAnICAgICAgICA8L2Rpdj4nXG4gICAgJyAgICAgICAge3svaW1hZ2V9fSdcbiAgICAnICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLXRleHRcIj4nXG4gICAgJyAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLWVkaXRcIj4nXG4gICAgJyAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInRhZ2xhLXRhZy1saW5rIHRhZ2xhLXRhZy1lZGl0LWxpbmtcIj4nXG4gICAgJyAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmcyBmcy1wZW5jaWxcIj48L2k+IEVkaXQnXG4gICAgJyAgICAgICAgICAgIDwvYT4nXG4gICAgJyAgICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMClcIiBjbGFzcz1cInRhZ2xhLXRhZy1saW5rIHRhZ2xhLXRhZy1kZWxldGUtbGlua1wiPidcbiAgICAnICAgICAgICAgICAgICA8aSBjbGFzcz1cImZzIGZzLWNyb3NzM1wiPjwvaT4gRGVsZXRlJ1xuICAgICcgICAgICAgICAgICA8L2E+J1xuICAgICcgICAgICAgICAgPC9kaXY+J1xuICAgICcgICAgICAgICAgPGgyIGNsYXNzPVwidGFnbGEtZGlhbG9nLXRpdGxlXCI+e3tsYWJlbH19PC9oMj4nXG4gICAgJyAgICAgICAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nLXByaWNlXCI+e3twcmljZX19PC9kaXY+J1xuICAgICcgICAgICAgICAgPHAgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctZGVzY3JpcHRpb25cIj57e2Rlc2NyaXB0aW9ufX08L3A+J1xuICAgICcgICAgICAgICAgPGEgaHJlZj1cInt7dXJsfX1cIiBjbGFzcz1cInRhZ2xhLWRpYWxvZy1idXR0b24gc3QtYnRuIHN0LWJ0bi1zdWNjZXNzIHN0LWJ0bi1zb2xpZFwiPidcbiAgICAnICAgICAgICAgICAgPGkgY2xhc3M9XCJmcyBmcy1jYXJ0XCI+PC9pPidcbiAgICAnICAgICAgICAgICAgQnV5IE5vdydcbiAgICAnICAgICAgICAgIDwvYT4nXG4gICAgJyAgICAgICAgPC9kaXY+J1xuICAgICcgICAgPC9kaXY+J1xuICAgICcgICAgPGZvcm0gY2xhc3M9XCJ0YWdsYS1mb3JtXCI+J1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1mb3JtLXRpdGxlXCI+J1xuICAgICcgICAgICAgICAgU2VsZWN0IFlvdXIgUHJvZHVjdCdcbiAgICAnICAgICAgICAgIDxhIGhyZWY9XCJqYXZhc2NyaXB0OnZvaWQoMCk7XCIgY2xhc3M9XCJ0YWdsYS1mb3JtLWNsb3NlXCI+w5c8L2E+J1xuICAgICcgICAgICAgIDwvZGl2PidcbiAgICAnICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ4XCI+J1xuICAgICcgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInlcIj4nXG4gICAgJyAgICAgICAgPHNlbGVjdCBkYXRhLXBsYWNlaG9sZGVyPVwiU2VhcmNoXCIgdHlwZT1cInRleHRcIiBuYW1lPVwidGFnXCIgY2xhc3M9XCJ0YWdsYS1zZWxlY3QgY2hvc2VuLXNlbGVjdFwiIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCI+J1xuICAgICcgICAgICAgICAgICA8b3B0aW9uPjwvb3B0aW9uPidcbiAgICAnICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjFcIj5Db2NraWU8L29wdGlvbj4nXG4gICAgJyAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyXCI+S2l3aTwvb3B0aW9uPidcbiAgICAnICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjNcIj5CdWRkeTwvb3B0aW9uPidcbiAgICAnICAgICAgICA8L3NlbGVjdD4nXG4gICAgJyAgICA8L2Zvcm0+J1xuICAgICc8L2Rpdj4nXG4gIF0uam9pbignXFxuJylcbiAgTkVXX1RBR19URU1QTEFURTogW1xuICAgICc8ZGl2IGNsYXNzPVwidGFnbGEtdGFnXCI+J1xuICAgICcgICAgPGkgY2xhc3M9XCJ0YWdsYS1pY29uIGZzIGZzLXRhZ1wiPjwvaT4nXG4gICAgJyAgICA8c3BhbiBjbGFzcz1cInRhZ2xhLWxhYmVsXCI+e3tsYWJlbH19PC9zcGFuPidcbiAgICAnPC9kaXY+J1xuICBdLmpvaW4oJ1xcbicpXG5cbmNsYXNzIFRhZ2xhIGV4dGVuZHMgU3RhY2tsYS5CYXNlXG4gIGNvbnN0cnVjdG9yOiAoJHdyYXBwZXIsIG9wdGlvbnMgPSB7fSkgLT5cbiAgICBzdXBlcigpXG4gICAgQHdyYXBwZXIgPSAkKCR3cmFwcGVyKVxuICAgIEBpbml0KG9wdGlvbnMpXG4gICAgQGJpbmQoKVxuXG4kLmV4dGVuZChUYWdsYSwgQVRUUlMpXG5cbnByb3RvID1cbiAgIyMjIyMjIyMjIyMjIyNcbiAgIyBVdGlsaXRpZXNcbiAgIyMjIyMjIyMjIyMjIyNcbiAgZm9ybWF0RmxvYXQ6IChudW0sIHBvcykgLT5cbiAgICBzaXplID0gTWF0aC5wb3coMTAsIHBvcylcbiAgICBNYXRoLnJvdW5kKG51bSAqIHNpemUpIC8gc2l6ZVxuICB0b1N0cmluZzogLT4gJ1RhZ2xhJ1xuXG4gICMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIFByaXZhdGUgTWV0aG9kc1xuICAjIyMjIyMjIyMjIyMjIyMjIyNcbiAgIyBJbml0aWFsaXplIGRyYWcgYW5kIHNlbGVjdCBsaWJzIGZvciBhIHNpbmdsZSB0YWdcbiAgX2FwcGx5VG9vbHM6ICgkdGFnKSAtPlxuICAgIGRyYWcgPSBuZXcgRHJhZ2dhYmlsbHkoJHRhZ1swXSwgVGFnbGEuRFJBR19BVFRSKVxuICAgIGRyYWcub24gJ2RyYWdFbmQnLCAkLnByb3h5KEBoYW5kbGVUYWdNb3ZlLCBAKVxuICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknLCBkcmFnKVxuICAgICMgVXBkYXRlIGZvcm1cbiAgICB0YWcgPSAkdGFnLmRhdGEoJ3RhZy1kYXRhJylcbiAgICAkZm9ybSA9ICR0YWcuZmluZCgnLnRhZ2xhLWZvcm0nKVxuICAgICRmb3JtLmZpbmQoJ1tuYW1lPXhdJykudmFsKHRhZy54KVxuICAgICRmb3JtLmZpbmQoJ1tuYW1lPXldJykudmFsKHRhZy55KVxuICAgICRmb3JtLmZpbmQoXCJbbmFtZT10YWddIG9wdGlvblt2YWx1ZT0je3RhZy52YWx1ZX1dXCIpLmF0dHIoJ3NlbGVjdGVkJywgJ3NlbGVjdGVkJylcbiAgICAkc2VsZWN0ID0gJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JylcbiAgICAkc2VsZWN0LmNob3NlbihUYWdsYS5TRUxFQ1RfQVRUUilcbiAgICAkc2VsZWN0Lm9uICdjaGFuZ2UnLCAkLnByb3h5KEBoYW5kbGVUYWdDaGFuZ2UsIEApXG4gICAgJHNlbGVjdC5vbiAnY2hvc2VuOmhpZGluZ19kcm9wZG93bicsIChlLCBwYXJhbXMpIC0+XG4gICAgICAkc2VsZWN0LnRyaWdnZXIoJ2Nob3NlbjpvcGVuJylcbiAgX3JlbW92ZVRvb2xzOiAoJHRhZykgLT5cbiAgICAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JykuZGVzdHJveSgpXG4gICAgJHNlbGVjdCA9ICR0YWcuZmluZCgnLnRhZ2xhLXNlbGVjdCcpXG4gICAgJHNlbGVjdC5zaG93KCkucmVtb3ZlQ2xhc3MgJ2Noem4tZG9uZSdcbiAgICAkc2VsZWN0Lm5leHQoKS5yZW1vdmUoKVxuXG4gIF9nZXRQb3NpdGlvbjogKCR0YWcpIC0+XG4gICAgQGxvZyAnX2dldFBvc2l0aW9uKCkgaXMgZXhlY3V0ZWQnXG4gICAgcG9zID0gJHRhZy5wb3NpdGlvbigpXG4gICAgeCA9IChwb3MubGVmdCArICgkdGFnLndpZHRoKCkgLyAyKSkgLyBAY3VycmVudFdpZHRoICogQG5hdHVyYWxXaWR0aFxuICAgIHkgPSAocG9zLnRvcCArICgkdGFnLmhlaWdodCgpIC8gMikpIC8gQGN1cnJlbnRIZWlnaHQgKiBAbmF0dXJhbFdpZHRoXG4gICAgaWYgQHVuaXQgaXMgJ3BlcmNlbnQnXG4gICAgICB4ID0geCAvIEBuYXR1cmFsV2lkdGggKiAxMDBcbiAgICAgIHkgPSB5IC8gQG5hdHVyYWxIZWlnaHQgKiAxMDBcbiAgICBbeCwgeV1cblxuICBfdXBkYXRlSW1hZ2VTaXplOiAoZGF0YSkgLT5cbiAgICBAbG9nICdfdXBkYXRlSW1hZ2VTaXplKCkgaXMgZXhlY3V0ZWQnXG4gICAgQG5hdHVyYWxXaWR0aCA9IGRhdGEubmF0dXJhbFdpZHRoXG4gICAgQG5hdHVyYWxIZWlnaHQgPSBkYXRhLm5hdHVyYWxIZWlnaHRcbiAgICBAY3VycmVudFdpZHRoID0gZGF0YS53aWR0aFxuICAgIEBjdXJyZW50SGVpZ2h0ID0gZGF0YS5oZWlnaHRcbiAgICBAd2lkdGhSYXRpbyA9IGRhdGEud2lkdGhSYXRpb1xuICAgIEBoZWlnaHRSYXRpbyA9IGRhdGEuaGVpZ2h0UmF0aW9cblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIEV2ZW50IEhhbmRsZXJzXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gIGhhbmRsZVRhZ0NsaWNrOiAoZSkgLT5cbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgcmV0dXJuIHVubGVzcyAkKGUudGFyZ2V0KS5oYXNDbGFzcygndGFnbGEtaWNvbicpXG4gICAgQGxvZyAnaGFuZGxlVGFnQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICAkdGFnID0gJChlLmN1cnJlbnRUYXJnZXQpXG4gICAgQHNocmluaygkdGFnKVxuICAgICR0YWcuYWRkQ2xhc3MoJ3RhZ2xhLXRhZy1hY3RpdmUnKVxuICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5lbmFibGUoKVxuXG4gIGhhbmRsZVRhZ0NoYW5nZTogKGUsIHBhcmFtcykgLT5cbiAgICBAbG9nICdoYW5kbGVUYWdDaGFuZ2UoKSBpcyBleGVjdXRlZCdcbiAgICAkc2VsZWN0ID0gJChlLnRhcmdldClcbiAgICAkdGFnID0gJHNlbGVjdC5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLnJlbW92ZUNsYXNzICd0YWdsYS10YWctY2hvb3NlIHRhZ2xhLXRhZy1hY3RpdmUnXG4gICAgZGF0YSA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgIGRhdGEubGFiZWwgPSAkc2VsZWN0LmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnRleHQoKVxuICAgIGRhdGEudmFsdWUgPSAkc2VsZWN0LnZhbCgpIHx8IGRhdGEubGFiZWxcbiAgICBzZXJpYWxpemUgPSAkdGFnLmZpbmQoJy50YWdsYS1mb3JtJykuc2VyaWFsaXplKClcbiAgICBAZW1pdCgnY2hhbmdlJywgW2RhdGEsIHNlcmlhbGl6ZSwgJHRhZ10pXG5cbiAgaGFuZGxlVGFnRGVsZXRlOiAoZSkgLT5cbiAgICBAbG9nICdoYW5kbGVUYWdEZWxldGUoKSBpcyBleGVjdXRlZCdcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAkdGFnID0gJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy50YWdsYS10YWcnKVxuICAgICR0YWcucmVtb3ZlKClcbiAgICBpbnN0YW5jZSA9ICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKVxuICAgIGluc3RhbmNlLmRlc3Ryb3koKSBpZiAoaW5zdGFuY2UpXG4gICAgZGF0YSA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgIEBlbWl0KCdkZWxldGUnLCBbZGF0YV0pXG5cbiAgaGFuZGxlVGFnRWRpdDogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnRWRpdCgpIGlzIGV4ZWN1dGVkJ1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAkdGFnID0gJChlLmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy50YWdsYS10YWcnKVxuICAgICR0YWcuYWRkQ2xhc3MoJ3RhZ2xhLXRhZy1jaG9vc2UnKVxuICAgIEB3cmFwcGVyLmFkZENsYXNzKCd0YWdsYS1lZGl0aW5nLXNlbGVjdGluZycpXG4gICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JykudHJpZ2dlcignY2hvc2VuOm9wZW4nKVxuICAgIEBlbWl0KCdlZGl0JywgWyR0YWcuZGF0YSgndGFnLWRhdGEnKV0pXG5cbiAgaGFuZGxlVGFnTW92ZTogKGluc3RhbmNlLCBldmVudCwgcG9pbnRlcikgLT5cbiAgICBAbG9nICdoYW5kbGVUYWdNb3ZlKCkgaXMgZXhlY3V0ZWQnXG5cbiAgICAkdGFnID0gJChpbnN0YW5jZS5lbGVtZW50KVxuICAgIGRhdGEgPSAkdGFnLmRhdGEoJ3RhZy1kYXRhJylcbiAgICBwb3MgPSBAX2dldFBvc2l0aW9uKCR0YWcpXG4gICAgZGF0YS54ID0gcG9zWzBdXG4gICAgZGF0YS55ID0gcG9zWzFdXG5cbiAgICAkZm9ybSA9ICR0YWcuZmluZCgnLnRhZ2xhLWZvcm0nKVxuICAgICRmb3JtLmZpbmQoJ1tuYW1lPXhdJykudmFsKGRhdGEueClcbiAgICAkZm9ybS5maW5kKCdbbmFtZT15XScpLnZhbChkYXRhLnkpXG4gICAgc2VyaWFsaXplID0gJHRhZy5maW5kKCcudGFnbGEtZm9ybScpLnNlcmlhbGl6ZSgpXG5cbiAgICBAbGFzdERyYWdUaW1lID0gbmV3IERhdGUoKVxuICAgIEBlbWl0KCdtb3ZlJywgW2RhdGEsIHNlcmlhbGl6ZSwgJHRhZ10pXG5cbiAgaGFuZGxlV3JhcHBlckNsaWNrOiAoZSkgLT5cbiAgICBAbG9nICdoYW5kbGVXcmFwcGVyQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICAjIEhhY2sgdG8gYXZvaWQgdHJpZ2dlcmluZyBjbGljayBldmVudFxuICAgIEBzaHJpbmsoKSBpZiAobmV3IERhdGUoKSAtIEBsYXN0RHJhZ1RpbWUgPiAxMClcblxuICBoYW5kbGVJbWFnZVJlc2l6ZTogKGUsIGRhdGEpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VSZXNpemUoKSBpcyBleGVjdXRlZCdcbiAgICBwcmV2V2lkdGggPSBAY3VycmVudFdpZHRoXG4gICAgcHJldkhlaWdodCA9IEBjdXJyZW50SGVpZ2h0XG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT5cbiAgICAgICR0YWcgPSAkKEApXG4gICAgICBwb3MgPSAkdGFnLnBvc2l0aW9uKClcbiAgICAgIHggPSAocG9zLmxlZnQgLyBwcmV2V2lkdGgpICogZGF0YS53aWR0aFxuICAgICAgeSA9IChwb3MudG9wIC8gcHJldkhlaWdodCkgKiBkYXRhLmhlaWdodFxuICAgICAgJHRhZy5jc3NcbiAgICAgICAgbGVmdDogXCIje3h9cHhcIlxuICAgICAgICB0b3A6IFwiI3t5fXB4XCJcbiAgICBAX3VwZGF0ZUltYWdlU2l6ZShkYXRhKVxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgUHVibGljIE1ldGhvZHNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgYWRkVGFnOiAodGFnID0ge30pIC0+XG4gICAgQGxvZyAnYWRkVGFnKCkgaXMgZXhlY3V0ZWQnXG4gICAgIyBSZW5kZXIgdGFnIGVsZW1lbnQgYnkgcHJvdmlkZWQgdGVtcGxhdGVcbiAgICAkdGFnID0gJChNdXN0YWNoZS5yZW5kZXIoQHRhZ1RlbXBsYXRlLCB0YWcpKVxuICAgIGlzTmV3ID0gJC5pc0VtcHR5T2JqZWN0KHRhZylcbiAgICBAd3JhcHBlci5hcHBlbmQoJHRhZylcbiAgICAjIERlZmF1bHQgcG9zaXRpb24gZm9yIG5ldyB0YWdcbiAgICBpZiBpc05ld1xuICAgICAgdGFnLnggPSA1MFxuICAgICAgdGFnLnkgPSA1MFxuICAgICAgJHRhZy5hZGRDbGFzcyAndGFnbGEtdGFnLW5ldyB0YWdsYS10YWctYWN0aXZlIHRhZ2xhLXRhZy1jaG9vc2UnXG4gICAgaWYgQHVuaXQgaXMgJ3BlcmNlbnQnXG4gICAgICB4ID0gQGN1cnJlbnRXaWR0aCAqICh0YWcueCAvIDEwMClcbiAgICAgIHkgPSBAY3VycmVudEhlaWdodCAqICh0YWcueSAvIDEwMClcbiAgICBlbHNlXG4gICAgICB4ID0gdGFnLnggKiBAd2lkdGhSYXRpb1xuICAgICAgeSA9IHRhZy55ICogQGhlaWdodFJhdGlvXG4gICAgb2Zmc2V0WCA9ICR0YWcub3V0ZXJXaWR0aCgpIC8gMlxuICAgIG9mZnNldFkgPSAkdGFnLm91dGVySGVpZ2h0KCkgLyAyXG4gICAgJHRhZy5jc3NcbiAgICAgIGxlZnQ6IFwiI3t4IC0gb2Zmc2V0WH1weFwiXG4gICAgICB0b3A6IFwiI3t5IC0gb2Zmc2V0WX1weFwiXG4gICAgIyBTYXZlIHRhZyBkYXRhIHRvIGRhdGEgYXR0ciBmb3IgZWFzeSBhY2Nlc3NcbiAgICAkdGFnLmRhdGEoJ3RhZy1kYXRhJywgdGFnKVxuICAgICMgUmVuZGVyIHRhZyBlZGl0b3IgdG9vbHNcbiAgICBpZiBAZWRpdG9yXG4gICAgICBAX2FwcGx5VG9vbHMoJHRhZylcbiAgICAgIGlmIGlzTmV3XG4gICAgICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5lbmFibGUoKVxuICAgICAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAgICAgc2V0VGltZW91dCA9PlxuICAgICAgICAgIEB3cmFwcGVyLmFkZENsYXNzKCd0YWdsYS1lZGl0aW5nLXNlbGVjdGluZycpXG4gICAgICAgICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JykudHJpZ2dlciAnY2hvc2VuOm9wZW4nXG4gICAgICAgICwgMTAwXG5cbiAgZGVsZXRlVGFnOiAoJHRhZykgLT5cbiAgICBAbG9nICdkZWxldGVUYWcoKSBpcyBleGVjdXRlZCdcblxuICBlZGl0OiAtPlxuICAgIHJldHVybiBpZiBAZWRpdG9yIGlzIG9uXG4gICAgQGxvZyAnZWRpdCgpIGlzIGV4ZWN1dGVkJ1xuICAgIEB3cmFwcGVyLmFkZENsYXNzKCd0YWdsYS1lZGl0aW5nJylcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAtPiBAX2FwcGx5VG9vbHMoJChAKSlcbiAgICBAZWRpdG9yID0gb25cblxuICAjIFNocmluayBldmVyeXRoaW5nIGV4Y2VwdCB0aGUgJGV4Y2VwdFxuICBzaHJpbms6ICgkZXhjZXB0ID0gbnVsbCkgLT5cbiAgICByZXR1cm4gaWYgQGVkaXRvciBpcyBvZmZcbiAgICBAbG9nICdzaHJpbmsoKSBpcyBleGVjdXRlZCdcbiAgICAkZXhjZXB0ID0gJCgkZXhjZXB0KVxuICAgIEB3cmFwcGVyLnJlbW92ZUNsYXNzICd0YWdsYS1lZGl0aW5nLXNlbGVjdGluZydcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAtPlxuICAgICAgcmV0dXJuIGlmICRleGNlcHRbMF0gaXMgQFxuICAgICAgJHRhZyA9ICQoQClcbiAgICAgIGlmICR0YWcuaGFzQ2xhc3MoJ3RhZ2xhLXRhZy1uZXcnKSBhbmQgISR0YWcuZmluZCgnW25hbWU9dGFnXScpLnZhbCgpXG4gICAgICAgICR0YWcucmVtb3ZlKClcbiAgICAgICR0YWcucmVtb3ZlQ2xhc3MgJ3RhZ2xhLXRhZy1hY3RpdmUgdGFnbGEtdGFnLWNob29zZSdcblxuICB1cGRhdGVEaWFsb2c6ICgkdGFnLCBkYXRhKSAtPlxuICAgIGh0bWwgPSAkKE11c3RhY2hlLnJlbmRlcihAdGFnVGVtcGxhdGUsIGRhdGEpKS5maW5kKCcudGFnbGEtZGlhbG9nJykuaHRtbCgpXG4gICAgJHRhZy5maW5kKCcudGFnbGEtZGlhbG9nJykuaHRtbChodG1sKVxuICAgICR0YWcuZGF0YSgndGFnLWRhdGEnLCBkYXRhKVxuXG4gIHVuZWRpdDogLT5cbiAgICByZXR1cm4gaWYgQGVkaXQgaXMgb2ZmXG4gICAgQGxvZyAndW5lZGl0KCkgaXMgZXhlY3V0ZWQnXG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT4gQF9yZW1vdmVUb29scygkKEApKVxuICAgIEB3cmFwcGVyLnJlbW92ZUNsYXNzICd0YWdsYS1lZGl0aW5nJ1xuICAgIEBlZGl0b3IgPSBvZmZcblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIExpZmVjeWNsZSBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gIGluaXQ6IChvcHRpb25zKSAtPlxuICAgICMgQ29uZmlndXJlIE9wdGlvbnNcbiAgICBAZGF0YSA9IG9wdGlvbnMuZGF0YSB8fCBbXVxuICAgIEBlZGl0b3IgPSAob3B0aW9ucy5lZGl0b3IgaXMgb24pID8gb24gOiBmYWxzZVxuICAgIEBmb3JtID0gaWYgb3B0aW9ucy5mb3JtIHRoZW4gJChvcHRpb25zLmZvcm0pIGVsc2UgVGFnbGEuRk9STV9URU1QTEFURVxuICAgIEB0YWdUZW1wbGF0ZSA9IGlmIG9wdGlvbnMudGFnVGVtcGxhdGUgdGhlbiAkKG9wdGlvbnMudGFnVGVtcGxhdGUpLmh0bWwoKSBlbHNlIFRhZ2xhLlRBR19URU1QTEFURVxuICAgIEB1bml0ID0gaWYgb3B0aW9ucy51bml0IGlzICdwZXJjZW50JyB0aGVuICdwZXJjZW50JyBlbHNlICdwaXhlbCdcbiAgICAjIEF0dHJpYnV0ZXNcbiAgICBAaW1hZ2VTaXplID0gbnVsbFxuICAgIEBpbWFnZSA9IEB3cmFwcGVyLmZpbmQoJ2ltZycpXG4gICAgQGxhc3REcmFnVGltZSA9IG5ldyBEYXRlKClcblxuICBiaW5kOiAtPlxuICAgIEBsb2cgJ2JpbmQoKSBpcyBleGVjdXRlZCdcbiAgICBAd3JhcHBlclxuICAgICAgLm9uICdtb3VzZWVudGVyJywgJC5wcm94eShAaGFuZGxlTW91c2VFbnRlciwgQClcbiAgICAgIC5vbiAnY2xpY2snLCAkLnByb3h5KEBoYW5kbGVXcmFwcGVyQ2xpY2ssIEApXG4gICAgICAub24gJ2NsaWNrJywgJy50YWdsYS10YWctZWRpdC1saW5rJywgJC5wcm94eShAaGFuZGxlVGFnRWRpdCwgQClcbiAgICAgIC5vbiAnY2xpY2snLCAnLnRhZ2xhLXRhZy1kZWxldGUtbGluaycsICQucHJveHkoQGhhbmRsZVRhZ0RlbGV0ZSwgQClcblxuICByZW5kZXJGbjogKHN1Y2Nlc3MsIGRhdGEpIC0+XG4gICAgIyBTdG9wIGlmIGltYWdlIGlzIGZhaWxlZCB0byBsb2FkXG4gICAgdW5sZXNzIHN1Y2Nlc3NcbiAgICAgIEBsb2coXCJGYWlsZWQgdG8gbG9hZCBpbWFnZTogI3tAaW1hZ2UuYXR0cignc3JjJyl9XCIsICdlcnJvcicpXG4gICAgICBAZGVzdHJveSgpXG4gICAgICByZXR1cm5cbiAgICAjIFNhdmUgZGltZW5zaW9uXG4gICAgQF91cGRhdGVJbWFnZVNpemUoZGF0YSlcbiAgICAjIEFwcGx5IG5lY2Vzc2FyeSBjbGFzcyBuYW1lc1xuICAgIEB3cmFwcGVyLmFkZENsYXNzICd0YWdsYSdcbiAgICBAd3JhcHBlci5hZGRDbGFzcyAndGFnbGEtZWRpdGluZycgaWYgQGVkaXRvclxuICAgICMgQ3JlYXRlIHRhZ3NcbiAgICBAYWRkVGFnIHRhZyBmb3IgdGFnIGluIEBkYXRhXG5cbiAgcmVuZGVyOiAtPlxuICAgIEBsb2cgJ3JlbmRlcigpIGlzIGV4ZWN1dGVkJ1xuICAgIEBpbWFnZVNpemUgPSBTdGFja2xhLmdldEltYWdlU2l6ZShAaW1hZ2UsICQucHJveHkoQHJlbmRlckZuLCBAKSlcbiAgICBAaW1hZ2VTaXplLm9uKCdjaGFuZ2UnLCAkLnByb3h5KEBoYW5kbGVJbWFnZVJlc2l6ZSwgQCkpXG5cbiAgZGVzdHJveTogLT5cbiAgICBAbG9nICdkZXN0cm95KCkgaXMgZXhlY3V0ZWQnXG5cbiQuZXh0ZW5kKFRhZ2xhOjosIHByb3RvKVxuXG53aW5kb3cuU3RhY2tsYSA9IHt9IHVubGVzcyB3aW5kb3cuU3RhY2tsYVxud2luZG93LlN0YWNrbGEuVGFnbGEgPSBUYWdsYVxuXG4iXX0=