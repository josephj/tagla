(function() {
  var ATTRS, Tagla, proto,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __hasProp = {}.hasOwnProperty;

  ATTRS = {
    NAME: 'Tagla',
    PREFIX: 'tagla-',
    DRAG_ATTR: {
      containment: '.tagla',
      handle: '.tagla-icon'
    },
    SELECT_ATTR: {
      allow_single_deselect: true,
      placeholder_text_single: 'Select an option',
      width: '310px'
    },
    FORM_TEMPLATE: [].join('\n'),
    TAG_TEMPLATE: ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">', '      {{label}}', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-edit-link">', '        <i class="fs fs-pencil"></i> Edit', '      </a>', '      <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-delete-link">', '        <i class="fs fs-cross3"></i> Delete', '      </a>', '    </span>', '    <div class="tagla-dialog">', '        {{#image}}', '        <div class="tagla-dialog-image">', '          <img src="{{image}}">', '        </div>', '        {{/image}}', '        <div class="tagla-dialog-text">', '          <div class="tagla-dialog-edit">', '            <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-edit-link">', '              <i class="fs fs-pencil"></i> Edit', '            </a>', '            <a href="javascript:void(0)" class="tagla-tag-link tagla-tag-delete-link">', '              <i class="fs fs-cross3"></i> Delete', '            </a>', '          </div>', '          <h2 class="tagla-dialog-title">{{label}}</h2>', '          <div class="tagla-dialog-price">{{price}}</div>', '          <p class="tagla-dialog-description">{{description}}</p>', '          <a href="{{url}}" class="tagla-dialog-button st-btn st-btn-success st-btn-solid">', '            <i class="fs fs-cart"></i>', '            Buy Now', '          </a>', '        </div>', '    </div>', '    <form class="tagla-form">', '        <div class="tagla-form-title">', '          Select Your Product', '          <a href="javascript:void(0);" class="tagla-form-close">Ã—</a>', '        </div>', '        <input type="hidden" name="x">', '        <input type="hidden" name="y">', '        <select data-placeholder="Search" type="text" name="tag" class="tagla-select chosen-select" placeholder="Search">', '            <option></option>', '            <option value="1">Cockie</option>', '            <option value="2">Kiwi</option>', '            <option value="3">Buddy</option>', '        </select>', '    </form>', '</div>'].join('\n'),
    NEW_TAG_TEMPLATE: ['<div class="tagla-tag">', '    <i class="tagla-icon fs fs-tag"></i>', '    <span class="tagla-label">{{label}}</span>', '</div>'].join('\n')
  };

  Tagla = (function(_super) {
    __extends(Tagla, _super);

    function Tagla($wrapper, options) {
      if (options == null) {
        options = {};
      }
      Tagla.__super__.constructor.call(this);
      this.wrapper = $($wrapper);
      this.init(options);
      this.bind();
    }

    return Tagla;

  })(Stackla.Base);

  $.extend(Tagla, ATTRS);

  proto = {
    formatFloat: function(num, pos) {
      var size;
      size = Math.pow(10, pos);
      return Math.round(num * size) / size;
    },
    toString: function() {
      return 'Tagla';
    },
    _applyTools: function($tag) {
      var $form, drag, tag;
      drag = new Draggabilly($tag[0], Tagla.DRAG_ATTR);
      drag.on('dragEnd', $.proxy(this.handleTagMove, this));
      $tag.data('draggabilly', drag);
      tag = $tag.data('tag-data');
      $form = $tag.find('.tagla-form');
      $form.find('[name=x]').val(tag.x);
      $form.find('[name=y]').val(tag.y);
      $form.find("[name=tag] option[value=" + tag.value + "]").attr('selected', 'selected');
      $tag.find('.tagla-select').chosen(Tagla.SELECT_ATTR);
      return $tag.find('.tagla-select').on('change', $.proxy(this.handleTagChange, this));
    },
    _removeTools: function($tag) {
      var $select;
      $tag.data('draggabilly').destroy();
      $select = $tag.find('.tagla-select');
      $select.show().removeClass('chzn-done');
      return $select.next().remove();
    },
    _getPosition: function($tag) {
      var pos, x, y;
      this.log('_getPosition() is executed');
      pos = $tag.position();
      x = (pos.left + ($tag.width() / 2)) / this.currentWidth * this.naturalWidth;
      y = (pos.top + ($tag.height() / 2)) / this.currentHeight * this.naturalWidth;
      if (this.unit === 'percent') {
        x = x / this.naturalWidth * 100;
        y = y / this.naturalHeight * 100;
      }
      return [x, y];
    },
    _updateImageSize: function(data) {
      var error;
      this.log('_updateImageSize() is executed');
      try {
        this.naturalWidth = data.naturalWidth;
        this.naturalHeight = data.naturalHeight;
        this.currentWidth = data.width;
        this.currentHeight = data.height;
        this.widthRatio = data.widthRatio;
        return this.heightRatio = data.heightRatio;
      } catch (_error) {
        error = _error;
        debugger;
        return console.error(error);
      }
    },
    handleTagClick: function(e) {
      var $tag;
      e.preventDefault();
      e.stopPropagation();
      if (!$(e.target).hasClass('tagla-icon')) {
        return;
      }
      this.log('handleTagClick() is executed');
      $tag = $(e.currentTarget);
      this.shrink($tag);
      $tag.addClass('tagla-tag-active');
      return $tag.data('draggabilly').enable();
    },
    handleTagChange: function(e, params) {
      var $select, $tag, data, serialize;
      this.log('handleTagChange() is executed');
      $select = $(e.target);
      $tag = $select.parents('.tagla-tag');
      $tag.removeClass('tagla-tag-choose tagla-tag-active');
      data = $tag.data('tag-data');
      data.label = $select.find('option:selected').text();
      data.value = $select.val() || data.label;
      serialize = $tag.find('.tagla-form').serialize();
      return this.emit('change', [data, serialize, $tag]);
    },
    handleTagDelete: function(e) {
      var $tag, data, instance;
      this.log('handleTagDelete() is executed');
      e.preventDefault();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.remove();
      instance = $tag.data('draggabilly');
      if (instance) {
        instance.destroy();
      }
      data = $tag.data('tag-data');
      return this.emit('delete', [data]);
    },
    handleTagEdit: function(e) {
      var $tag;
      this.log('handleTagEdit() is executed');
      e.preventDefault();
      e.stopPropagation();
      $tag = $(e.currentTarget).parents('.tagla-tag');
      $tag.addClass('tagla-tag-choose');
      $tag.find('.tagla-select').trigger('chosen:open');
      return this.emit('edit', [$tag.data('tag-data')]);
    },
    handleTagMove: function(instance, event, pointer) {
      var $form, $tag, data, pos, serialize;
      this.log('handleTagMove() is executed');
      $tag = $(instance.element);
      data = $tag.data('tag-data');
      pos = this._getPosition($tag);
      data.x = pos[0];
      data.y = pos[1];
      $form = $tag.find('.tagla-form');
      $form.find('[name=x]').val(data.x);
      $form.find('[name=y]').val(data.y);
      serialize = $tag.find('.tagla-form').serialize();
      return this.emit('move', [data, serialize, $tag]);
    },
    handleWrapperClick: function(e) {
      this.log('handleWrapperClick() is executed');
      return this.shrink();
    },
    handleImageResize: function(e, data) {
      var prevHeight, prevWidth;
      this.log('handleImageResize() is executed');
      prevWidth = this.currentWidth;
      prevHeight = this.currentHeight;
      $('.tagla-tag').each(function() {
        var $tag, pos, x, y;
        $tag = $(this);
        pos = $tag.position();
        x = (pos.left / prevWidth) * data.width;
        y = (pos.top / prevHeight) * data.height;
        return $tag.css({
          left: x + "px",
          top: y + "px"
        });
      });
      return this._updateImageSize(data);
    },
    addTag: function(tag) {
      var $tag, isNew, offsetX, offsetY, x, y;
      if (tag == null) {
        tag = {};
      }
      this.log('addTag() is executed');
      $tag = $(Mustache.render(this.tagTemplate, tag));
      isNew = $.isEmptyObject(tag);
      this.wrapper.append($tag);
      if (isNew) {
        tag.x = 50;
        tag.y = 50;
        $tag.addClass('tagla-tag-new tagla-tag-active tagla-tag-choose');
      }
      if (this.unit === 'percent') {
        x = this.currentWidth * (tag.x / 100);
        y = this.currentHeight * (tag.y / 100);
      } else {
        x = tag.x * this.widthRatio;
        y = tag.y * this.heightRatio;
      }
      offsetX = $tag.outerWidth() / 2;
      offsetY = $tag.outerHeight() / 2;
      $tag.css({
        left: (x - offsetX) + "px",
        top: (y - offsetY) + "px"
      });
      $tag.data('tag-data', tag);
      if (this.editor) {
        this._applyTools($tag);
        if (isNew) {
          $tag.data('draggabilly').enable();
          $tag.addClass('tagla-tag-choose');
          return $tag.find('.tagla-select').trigger('chosen:open');
        }
      }
    },
    deleteTag: function($tag) {
      return this.log('deleteTag() is executed');
    },
    edit: function() {
      if (this.editor === true) {
        return;
      }
      this.log('edit() is executed');
      this.wrapper.addClass('tagla-editing');
      $('.tagla-tag').each(function() {
        return this._applyTools($(this));
      });
      return this.editor = true;
    },
    shrink: function($except) {
      if ($except == null) {
        $except = null;
      }
      if (this.editor === false) {
        return;
      }
      this.log('shrink() is executed');
      $except = $($except);
      return $('.tagla-tag').each(function() {
        var $tag;
        if ($except[0] === this) {
          return;
        }
        $tag = $(this);
        if ($tag.hasClass('tagla-tag-new') && !$tag.find('[name=tag]').val()) {
          $tag.remove();
        }
        return $tag.removeClass('tagla-tag-active tagla-tag-choose');
      });
    },
    updateDialog: function($tag, data) {
      var html;
      html = $(Mustache.render(this.tagTemplate, data)).find('.tagla-dialog').html();
      $tag.find('.tagla-dialog').html(html);
      return $tag.data('tag-data', data);
    },
    unedit: function() {
      if (this.edit === false) {
        return;
      }
      this.log('unedit() is executed');
      $('.tagla-tag').each(function() {
        return this._removeTools($(this));
      });
      this.wrapper.removeClass('tagla-editing');
      return this.editor = false;
    },
    init: function(options) {
      var _ref;
      this.data = options.data || [];
      this.editor = (_ref = options.editor === true) != null ? _ref : {
        on: false
      };
      this.form = options.form ? $(options.form) : Tagla.FORM_TEMPLATE;
      this.tagTemplate = options.tagTemplate ? $(options.tagTemplate).html() : Tagla.TAG_TEMPLATE;
      this.unit = options.unit === 'percent' ? 'percent' : 'pixel';
      this.imageSize = null;
      return this.image = this.wrapper.find('img');
    },
    bind: function() {
      this.log('bind() is executed');
      return this.wrapper.on('mouseenter', $.proxy(this.handleMouseEnter, this)).on('click', $.proxy(this.handleWrapperClick, this)).on('click', '.tagla-tag-edit-link', $.proxy(this.handleTagEdit, this)).on('click', '.tagla-tag-delete-link', $.proxy(this.handleTagDelete, this));
    },
    renderFn: function(success, data) {
      var tag, _i, _len, _ref, _results;
      if (!success) {
        this.log("Failed to load image: " + (this.image.attr('src')), 'error');
        this.destroy();
        return;
      }
      this._updateImageSize(data);
      this.wrapper.addClass('tagla');
      if (this.editor) {
        this.wrapper.addClass('tagla-editing');
      }
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        tag = _ref[_i];
        _results.push(this.addTag(tag));
      }
      return _results;
    },
    render: function() {
      this.log('render() is executed');
      this.imageSize = Stackla.getImageSize(this.image, $.proxy(this.renderFn, this));
      return this.imageSize.on('change', $.proxy(this.handleImageResize, this));
    },
    destroy: function() {
      return this.log('destroy() is executed');
    }
  };

  $.extend(Tagla.prototype, proto);

  if (!window.Stackla) {
    window.Stackla = {};
  }

  window.Stackla.Tagla = Tagla;

}).call(this);

//# sourceMappingURL=data:application/json;base64,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QyxDQUFBLE1BQXRDO0FBQUEsUUFBQSxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQVQsQ0FBbUIsZUFBbkIsQ0FBQSxDQUFBO09BUkE7QUFVQTtBQUFBO1dBQUEsMkNBQUE7dUJBQUE7QUFBQSxzQkFBQSxJQUFDLENBQUEsTUFBRCxDQUFRLEdBQVIsRUFBQSxDQUFBO0FBQUE7c0JBWlE7SUFBQSxDQTdOVjtBQUFBLElBMk9BLE1BQUEsRUFBUSxTQUFBLEdBQUE7QUFDTixNQUFBLElBQUMsQ0FBQSxHQUFELENBQU0sc0JBQU4sQ0FBQSxDQUFBO0FBQUEsTUFDQSxJQUFDLENBQUEsU0FBRCxHQUFhLE9BQU8sQ0FBQyxZQUFSLENBQXFCLElBQUMsQ0FBQSxLQUF0QixFQUE2QixDQUFDLENBQUMsS0FBRixDQUFRLElBQUMsQ0FBQSxRQUFULEVBQW1CLElBQW5CLENBQTdCLENBRGIsQ0FBQTthQUVBLElBQUMsQ0FBQSxTQUFTLENBQUMsRUFBWCxDQUFlLFFBQWYsRUFBd0IsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxJQUFDLENBQUEsaUJBQVQsRUFBNEIsSUFBNUIsQ0FBeEIsRUFITTtJQUFBLENBM09SO0FBQUEsSUFnUEEsT0FBQSxFQUFTLFNBQUEsR0FBQTthQUNQLElBQUMsQ0FBQSxHQUFELENBQU0sdUJBQU4sRUFETztJQUFBLENBaFBUO0dBcEZGLENBQUE7O0FBQUEsRUF1VUEsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxLQUFLLENBQUEsU0FBZCxFQUFrQixLQUFsQixDQXZVQSxDQUFBOztBQXlVQSxFQUFBLElBQUEsQ0FBQSxNQUFpQyxDQUFDLE9BQWxDO0FBQUEsSUFBQSxNQUFNLENBQUMsT0FBUCxHQUFpQixFQUFqQixDQUFBO0dBelVBOztBQUFBLEVBMFVBLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBZixHQUF1QixLQTFVdkIsQ0FBQTtBQUFBIiwiZmlsZSI6InRhZ2xhLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiQVRUUlMgPVxuICBOQU1FOiAnVGFnbGEnXG4gIFBSRUZJWDogJ3RhZ2xhLSdcbiAgRFJBR19BVFRSOlxuICAgIGNvbnRhaW5tZW50OiAnLnRhZ2xhJ1xuICAgIGhhbmRsZTogJy50YWdsYS1pY29uJ1xuICBTRUxFQ1RfQVRUUjpcbiAgICBhbGxvd19zaW5nbGVfZGVzZWxlY3Q6IG9uXG4gICAgcGxhY2Vob2xkZXJfdGV4dF9zaW5nbGU6ICdTZWxlY3QgYW4gb3B0aW9uJ1xuICAgIHdpZHRoOiAnMzEwcHgnXG4gIEZPUk1fVEVNUExBVEU6IFtcbiAgXS5qb2luKCdcXG4nKVxuICBUQUdfVEVNUExBVEU6IFtcbiAgICAnPGRpdiBjbGFzcz1cInRhZ2xhLXRhZ1wiPidcbiAgICAnICAgIDxpIGNsYXNzPVwidGFnbGEtaWNvbiBmcyBmcy10YWdcIj48L2k+J1xuICAgICcgICAgPHNwYW4gY2xhc3M9XCJ0YWdsYS1sYWJlbFwiPidcbiAgICAnICAgICAge3tsYWJlbH19J1xuICAgICcgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgY2xhc3M9XCJ0YWdsYS10YWctbGluayB0YWdsYS10YWctZWRpdC1saW5rXCI+J1xuICAgICcgICAgICAgIDxpIGNsYXNzPVwiZnMgZnMtcGVuY2lsXCI+PC9pPiBFZGl0J1xuICAgICcgICAgICA8L2E+J1xuICAgICcgICAgICA8YSBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApXCIgY2xhc3M9XCJ0YWdsYS10YWctbGluayB0YWdsYS10YWctZGVsZXRlLWxpbmtcIj4nXG4gICAgJyAgICAgICAgPGkgY2xhc3M9XCJmcyBmcy1jcm9zczNcIj48L2k+IERlbGV0ZSdcbiAgICAnICAgICAgPC9hPidcbiAgICAnICAgIDwvc3Bhbj4nXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwidGFnbGEtZGlhbG9nXCI+J1xuICAgICcgICAgICAgIHt7I2ltYWdlfX0nXG4gICAgJyAgICAgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWRpYWxvZy1pbWFnZVwiPidcbiAgICAnICAgICAgICAgIDxpbWcgc3JjPVwie3tpbWFnZX19XCI+J1xuICAgICcgICAgICAgIDwvZGl2PidcbiAgICAnICAgICAgICB7ey9pbWFnZX19J1xuICAgICcgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctdGV4dFwiPidcbiAgICAnICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctZWRpdFwiPidcbiAgICAnICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwidGFnbGEtdGFnLWxpbmsgdGFnbGEtdGFnLWVkaXQtbGlua1wiPidcbiAgICAnICAgICAgICAgICAgICA8aSBjbGFzcz1cImZzIGZzLXBlbmNpbFwiPjwvaT4gRWRpdCdcbiAgICAnICAgICAgICAgICAgPC9hPidcbiAgICAnICAgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiIGNsYXNzPVwidGFnbGEtdGFnLWxpbmsgdGFnbGEtdGFnLWRlbGV0ZS1saW5rXCI+J1xuICAgICcgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZnMgZnMtY3Jvc3MzXCI+PC9pPiBEZWxldGUnXG4gICAgJyAgICAgICAgICAgIDwvYT4nXG4gICAgJyAgICAgICAgICA8L2Rpdj4nXG4gICAgJyAgICAgICAgICA8aDIgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctdGl0bGVcIj57e2xhYmVsfX08L2gyPidcbiAgICAnICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0YWdsYS1kaWFsb2ctcHJpY2VcIj57e3ByaWNlfX08L2Rpdj4nXG4gICAgJyAgICAgICAgICA8cCBjbGFzcz1cInRhZ2xhLWRpYWxvZy1kZXNjcmlwdGlvblwiPnt7ZGVzY3JpcHRpb259fTwvcD4nXG4gICAgJyAgICAgICAgICA8YSBocmVmPVwie3t1cmx9fVwiIGNsYXNzPVwidGFnbGEtZGlhbG9nLWJ1dHRvbiBzdC1idG4gc3QtYnRuLXN1Y2Nlc3Mgc3QtYnRuLXNvbGlkXCI+J1xuICAgICcgICAgICAgICAgICA8aSBjbGFzcz1cImZzIGZzLWNhcnRcIj48L2k+J1xuICAgICcgICAgICAgICAgICBCdXkgTm93J1xuICAgICcgICAgICAgICAgPC9hPidcbiAgICAnICAgICAgICA8L2Rpdj4nXG4gICAgJyAgICA8L2Rpdj4nXG4gICAgJyAgICA8Zm9ybSBjbGFzcz1cInRhZ2xhLWZvcm1cIj4nXG4gICAgJyAgICAgICAgPGRpdiBjbGFzcz1cInRhZ2xhLWZvcm0tdGl0bGVcIj4nXG4gICAgJyAgICAgICAgICBTZWxlY3QgWW91ciBQcm9kdWN0J1xuICAgICcgICAgICAgICAgPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInRhZ2xhLWZvcm0tY2xvc2VcIj7DlzwvYT4nXG4gICAgJyAgICAgICAgPC9kaXY+J1xuICAgICcgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInhcIj4nXG4gICAgJyAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwieVwiPidcbiAgICAnICAgICAgICA8c2VsZWN0IGRhdGEtcGxhY2Vob2xkZXI9XCJTZWFyY2hcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJ0YWdcIiBjbGFzcz1cInRhZ2xhLXNlbGVjdCBjaG9zZW4tc2VsZWN0XCIgcGxhY2Vob2xkZXI9XCJTZWFyY2hcIj4nXG4gICAgJyAgICAgICAgICAgIDxvcHRpb24+PC9vcHRpb24+J1xuICAgICcgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPkNvY2tpZTwvb3B0aW9uPidcbiAgICAnICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjJcIj5LaXdpPC9vcHRpb24+J1xuICAgICcgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiM1wiPkJ1ZGR5PC9vcHRpb24+J1xuICAgICcgICAgICAgIDwvc2VsZWN0PidcbiAgICAnICAgIDwvZm9ybT4nXG4gICAgJzwvZGl2PidcbiAgXS5qb2luKCdcXG4nKVxuICBORVdfVEFHX1RFTVBMQVRFOiBbXG4gICAgJzxkaXYgY2xhc3M9XCJ0YWdsYS10YWdcIj4nXG4gICAgJyAgICA8aSBjbGFzcz1cInRhZ2xhLWljb24gZnMgZnMtdGFnXCI+PC9pPidcbiAgICAnICAgIDxzcGFuIGNsYXNzPVwidGFnbGEtbGFiZWxcIj57e2xhYmVsfX08L3NwYW4+J1xuICAgICc8L2Rpdj4nXG4gIF0uam9pbignXFxuJylcblxuY2xhc3MgVGFnbGEgZXh0ZW5kcyBTdGFja2xhLkJhc2VcbiAgY29uc3RydWN0b3I6ICgkd3JhcHBlciwgb3B0aW9ucyA9IHt9KSAtPlxuICAgIHN1cGVyKClcbiAgICBAd3JhcHBlciA9ICQoJHdyYXBwZXIpXG4gICAgQGluaXQob3B0aW9ucylcbiAgICBAYmluZCgpXG5cbiQuZXh0ZW5kKFRhZ2xhLCBBVFRSUylcblxucHJvdG8gPVxuICAjIyMjIyMjIyMjIyMjI1xuICAjIFV0aWxpdGllc1xuICAjIyMjIyMjIyMjIyMjI1xuICBmb3JtYXRGbG9hdDogKG51bSwgcG9zKSAtPlxuICAgIHNpemUgPSBNYXRoLnBvdygxMCwgcG9zKVxuICAgIE1hdGgucm91bmQobnVtICogc2l6ZSkgLyBzaXplXG4gIHRvU3RyaW5nOiAtPiAnVGFnbGEnXG5cbiAgIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgUHJpdmF0ZSBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIEluaXRpYWxpemUgZHJhZyBhbmQgc2VsZWN0IGxpYnMgZm9yIGEgc2luZ2xlIHRhZ1xuICBfYXBwbHlUb29sczogKCR0YWcpIC0+XG4gICAgZHJhZyA9IG5ldyBEcmFnZ2FiaWxseSgkdGFnWzBdLCBUYWdsYS5EUkFHX0FUVFIpXG4gICAgZHJhZy5vbiAnZHJhZ0VuZCcsICQucHJveHkoQGhhbmRsZVRhZ01vdmUsIEApXG4gICAgJHRhZy5kYXRhKCdkcmFnZ2FiaWxseScsIGRyYWcpXG4gICAgIyBVcGRhdGUgZm9ybVxuICAgIHRhZyA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgICRmb3JtID0gJHRhZy5maW5kKCcudGFnbGEtZm9ybScpXG4gICAgJGZvcm0uZmluZCgnW25hbWU9eF0nKS52YWwodGFnLngpXG4gICAgJGZvcm0uZmluZCgnW25hbWU9eV0nKS52YWwodGFnLnkpXG4gICAgJGZvcm0uZmluZChcIltuYW1lPXRhZ10gb3B0aW9uW3ZhbHVlPSN7dGFnLnZhbHVlfV1cIikuYXR0cignc2VsZWN0ZWQnLCAnc2VsZWN0ZWQnKVxuICAgICR0YWcuZmluZCgnLnRhZ2xhLXNlbGVjdCcpLmNob3NlbihUYWdsYS5TRUxFQ1RfQVRUUilcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKS5vbignY2hhbmdlJywgJC5wcm94eShAaGFuZGxlVGFnQ2hhbmdlLCBAKSlcblxuICBfcmVtb3ZlVG9vbHM6ICgkdGFnKSAtPlxuICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5kZXN0cm95KClcbiAgICAkc2VsZWN0ID0gJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JylcbiAgICAkc2VsZWN0LnNob3coKS5yZW1vdmVDbGFzcyAnY2h6bi1kb25lJ1xuICAgICRzZWxlY3QubmV4dCgpLnJlbW92ZSgpXG5cbiAgX2dldFBvc2l0aW9uOiAoJHRhZykgLT5cbiAgICBAbG9nICdfZ2V0UG9zaXRpb24oKSBpcyBleGVjdXRlZCdcbiAgICBwb3MgPSAkdGFnLnBvc2l0aW9uKClcbiAgICB4ID0gKHBvcy5sZWZ0ICsgKCR0YWcud2lkdGgoKSAvIDIpKSAvIEBjdXJyZW50V2lkdGggKiBAbmF0dXJhbFdpZHRoXG4gICAgeSA9IChwb3MudG9wICsgKCR0YWcuaGVpZ2h0KCkgLyAyKSkgLyBAY3VycmVudEhlaWdodCAqIEBuYXR1cmFsV2lkdGhcbiAgICBpZiBAdW5pdCBpcyAncGVyY2VudCdcbiAgICAgIHggPSB4IC8gQG5hdHVyYWxXaWR0aCAqIDEwMFxuICAgICAgeSA9IHkgLyBAbmF0dXJhbEhlaWdodCAqIDEwMFxuICAgIHJldHVybiBbeCwgeV1cblxuICBfdXBkYXRlSW1hZ2VTaXplOiAoZGF0YSkgLT5cbiAgICBAbG9nICdfdXBkYXRlSW1hZ2VTaXplKCkgaXMgZXhlY3V0ZWQnXG4gICAgdHJ5XG4gICAgICBAbmF0dXJhbFdpZHRoID0gZGF0YS5uYXR1cmFsV2lkdGhcbiAgICAgIEBuYXR1cmFsSGVpZ2h0ID0gZGF0YS5uYXR1cmFsSGVpZ2h0XG4gICAgICBAY3VycmVudFdpZHRoID0gZGF0YS53aWR0aFxuICAgICAgQGN1cnJlbnRIZWlnaHQgPSBkYXRhLmhlaWdodFxuICAgICAgQHdpZHRoUmF0aW8gPSBkYXRhLndpZHRoUmF0aW9cbiAgICAgIEBoZWlnaHRSYXRpbyA9IGRhdGEuaGVpZ2h0UmF0aW9cbiAgICBjYXRjaCBlcnJvclxuICAgICAgZGVidWdnZXJcbiAgICAgIGNvbnNvbGUuZXJyb3IgIGVycm9yXG5cbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgIyBFdmVudCBIYW5kbGVyc1xuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICBoYW5kbGVUYWdDbGljazogKGUpIC0+XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKVxuICAgIHJldHVybiB1bmxlc3MgJChlLnRhcmdldCkuaGFzQ2xhc3MoJ3RhZ2xhLWljb24nKVxuICAgIEBsb2cgJ2hhbmRsZVRhZ0NsaWNrKCkgaXMgZXhlY3V0ZWQnXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KVxuICAgIEBzaHJpbmsoJHRhZylcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctYWN0aXZlJylcbiAgICAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JykuZW5hYmxlKClcblxuICBoYW5kbGVUYWdDaGFuZ2U6IChlLCBwYXJhbXMpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnQ2hhbmdlKCkgaXMgZXhlY3V0ZWQnXG4gICAgJHNlbGVjdCA9ICQoZS50YXJnZXQpXG4gICAgJHRhZyA9ICRzZWxlY3QucGFyZW50cygnLnRhZ2xhLXRhZycpXG4gICAgJHRhZy5yZW1vdmVDbGFzcyAndGFnbGEtdGFnLWNob29zZSB0YWdsYS10YWctYWN0aXZlJ1xuICAgIGRhdGEgPSAkdGFnLmRhdGEoJ3RhZy1kYXRhJylcbiAgICBkYXRhLmxhYmVsID0gJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS50ZXh0KClcbiAgICBkYXRhLnZhbHVlID0gJHNlbGVjdC52YWwoKSB8fCBkYXRhLmxhYmVsXG4gICAgc2VyaWFsaXplID0gJHRhZy5maW5kKCcudGFnbGEtZm9ybScpLnNlcmlhbGl6ZSgpXG4gICAgQGVtaXQoJ2NoYW5nZScsIFtkYXRhLCBzZXJpYWxpemUsICR0YWddKVxuXG4gIGhhbmRsZVRhZ0RlbGV0ZTogKGUpIC0+XG4gICAgQGxvZyAnaGFuZGxlVGFnRGVsZXRlKCkgaXMgZXhlY3V0ZWQnXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLnJlbW92ZSgpXG4gICAgaW5zdGFuY2UgPSAkdGFnLmRhdGEoJ2RyYWdnYWJpbGx5JylcbiAgICBpbnN0YW5jZS5kZXN0cm95KCkgaWYgKGluc3RhbmNlKVxuICAgIGRhdGEgPSAkdGFnLmRhdGEoJ3RhZy1kYXRhJylcbiAgICBAZW1pdCgnZGVsZXRlJywgW2RhdGFdKVxuXG4gIGhhbmRsZVRhZ0VkaXQ6IChlKSAtPlxuICAgIEBsb2cgJ2hhbmRsZVRhZ0VkaXQoKSBpcyBleGVjdXRlZCdcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgJHRhZyA9ICQoZS5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcudGFnbGEtdGFnJylcbiAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAkdGFnLmZpbmQoJy50YWdsYS1zZWxlY3QnKS50cmlnZ2VyKCdjaG9zZW46b3BlbicpXG4gICAgQGVtaXQoJ2VkaXQnLCBbJHRhZy5kYXRhKCd0YWctZGF0YScpXSlcblxuICBoYW5kbGVUYWdNb3ZlOiAoaW5zdGFuY2UsIGV2ZW50LCBwb2ludGVyKSAtPlxuICAgIEBsb2cgJ2hhbmRsZVRhZ01vdmUoKSBpcyBleGVjdXRlZCdcblxuICAgICR0YWcgPSAkKGluc3RhbmNlLmVsZW1lbnQpXG4gICAgZGF0YSA9ICR0YWcuZGF0YSgndGFnLWRhdGEnKVxuICAgIHBvcyA9IEBfZ2V0UG9zaXRpb24oJHRhZylcbiAgICBkYXRhLnggPSBwb3NbMF1cbiAgICBkYXRhLnkgPSBwb3NbMV1cblxuICAgICRmb3JtID0gJHRhZy5maW5kKCcudGFnbGEtZm9ybScpXG4gICAgJGZvcm0uZmluZCgnW25hbWU9eF0nKS52YWwoZGF0YS54KVxuICAgICRmb3JtLmZpbmQoJ1tuYW1lPXldJykudmFsKGRhdGEueSlcbiAgICBzZXJpYWxpemUgPSAkdGFnLmZpbmQoJy50YWdsYS1mb3JtJykuc2VyaWFsaXplKClcblxuICAgIEBlbWl0KCdtb3ZlJywgW2RhdGEsIHNlcmlhbGl6ZSwgJHRhZ10pXG5cbiAgaGFuZGxlV3JhcHBlckNsaWNrOiAoZSkgLT5cbiAgICBAbG9nICdoYW5kbGVXcmFwcGVyQ2xpY2soKSBpcyBleGVjdXRlZCdcbiAgICBAc2hyaW5rKClcblxuICBoYW5kbGVJbWFnZVJlc2l6ZTogKGUsIGRhdGEpIC0+XG4gICAgQGxvZyAnaGFuZGxlSW1hZ2VSZXNpemUoKSBpcyBleGVjdXRlZCdcbiAgICBwcmV2V2lkdGggPSBAY3VycmVudFdpZHRoXG4gICAgcHJldkhlaWdodCA9IEBjdXJyZW50SGVpZ2h0XG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT5cbiAgICAgICR0YWcgPSAkKEApXG4gICAgICBwb3MgPSAkdGFnLnBvc2l0aW9uKClcbiAgICAgIHggPSAocG9zLmxlZnQgLyBwcmV2V2lkdGgpICogZGF0YS53aWR0aFxuICAgICAgeSA9IChwb3MudG9wIC8gcHJldkhlaWdodCkgKiBkYXRhLmhlaWdodFxuICAgICAgJHRhZy5jc3NcbiAgICAgICAgbGVmdDogXCIje3h9cHhcIlxuICAgICAgICB0b3A6IFwiI3t5fXB4XCJcbiAgICBAX3VwZGF0ZUltYWdlU2l6ZShkYXRhKVxuXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gICMgUHVibGljIE1ldGhvZHNcbiAgIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAgYWRkVGFnOiAodGFnID0ge30pIC0+XG4gICAgQGxvZyAnYWRkVGFnKCkgaXMgZXhlY3V0ZWQnXG4gICAgIyBSZW5kZXIgdGFnIGVsZW1lbnQgYnkgcHJvdmlkZWQgdGVtcGxhdGVcbiAgICAkdGFnID0gJChNdXN0YWNoZS5yZW5kZXIoQHRhZ1RlbXBsYXRlLCB0YWcpKVxuICAgIGlzTmV3ID0gJC5pc0VtcHR5T2JqZWN0KHRhZylcbiAgICBAd3JhcHBlci5hcHBlbmQoJHRhZylcbiAgICAjIERlZmF1bHQgcG9zaXRpb24gZm9yIG5ldyB0YWdcbiAgICBpZiBpc05ld1xuICAgICAgdGFnLnggPSA1MFxuICAgICAgdGFnLnkgPSA1MFxuICAgICAgJHRhZy5hZGRDbGFzcyAndGFnbGEtdGFnLW5ldyB0YWdsYS10YWctYWN0aXZlIHRhZ2xhLXRhZy1jaG9vc2UnXG4gICAgaWYgQHVuaXQgaXMgJ3BlcmNlbnQnXG4gICAgICB4ID0gQGN1cnJlbnRXaWR0aCAqICh0YWcueCAvIDEwMClcbiAgICAgIHkgPSBAY3VycmVudEhlaWdodCAqICh0YWcueSAvIDEwMClcbiAgICBlbHNlXG4gICAgICB4ID0gdGFnLnggKiBAd2lkdGhSYXRpb1xuICAgICAgeSA9IHRhZy55ICogQGhlaWdodFJhdGlvXG4gICAgb2Zmc2V0WCA9ICR0YWcub3V0ZXJXaWR0aCgpIC8gMlxuICAgIG9mZnNldFkgPSAkdGFnLm91dGVySGVpZ2h0KCkgLyAyXG4gICAgJHRhZy5jc3NcbiAgICAgIGxlZnQ6IFwiI3t4IC0gb2Zmc2V0WH1weFwiXG4gICAgICB0b3A6IFwiI3t5IC0gb2Zmc2V0WX1weFwiXG4gICAgIyBTYXZlIHRhZyBkYXRhIHRvIGRhdGEgYXR0ciBmb3IgZWFzeSBhY2Nlc3NcbiAgICAkdGFnLmRhdGEoJ3RhZy1kYXRhJywgdGFnKVxuICAgICMgUmVuZGVyIHRhZyBlZGl0b3IgdG9vbHNcbiAgICBpZiBAZWRpdG9yXG4gICAgICBAX2FwcGx5VG9vbHMoJHRhZylcbiAgICAgIGlmIGlzTmV3XG4gICAgICAgICR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5lbmFibGUoKVxuICAgICAgICAkdGFnLmFkZENsYXNzKCd0YWdsYS10YWctY2hvb3NlJylcbiAgICAgICAgJHRhZy5maW5kKCcudGFnbGEtc2VsZWN0JykudHJpZ2dlcignY2hvc2VuOm9wZW4nKVxuXG4gIGRlbGV0ZVRhZzogKCR0YWcpIC0+XG4gICAgQGxvZyAnZGVsZXRlVGFnKCkgaXMgZXhlY3V0ZWQnXG5cbiAgZWRpdDogLT5cbiAgICByZXR1cm4gaWYgQGVkaXRvciBpcyBvblxuICAgIEBsb2cgJ2VkaXQoKSBpcyBleGVjdXRlZCdcbiAgICBAd3JhcHBlci5hZGRDbGFzcygndGFnbGEtZWRpdGluZycpXG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT4gQF9hcHBseVRvb2xzKCQoQCkpXG4gICAgQGVkaXRvciA9IG9uXG5cbiAgc2hyaW5rOiAoJGV4Y2VwdCA9IG51bGwpIC0+XG4gICAgcmV0dXJuIGlmIEBlZGl0b3IgaXMgb2ZmXG4gICAgQGxvZyAnc2hyaW5rKCkgaXMgZXhlY3V0ZWQnXG4gICAgJGV4Y2VwdCA9ICQoJGV4Y2VwdClcbiAgICAkKCcudGFnbGEtdGFnJykuZWFjaCAtPlxuICAgICAgcmV0dXJuIGlmICRleGNlcHRbMF0gaXMgQFxuICAgICAgJHRhZyA9ICQoQClcbiAgICAgICNhbGVydCAkdGFnLmZpbmQoJ1tuYW1lPXRhZ10nKS52YWwoKVxuICAgICAgaWYgJHRhZy5oYXNDbGFzcygndGFnbGEtdGFnLW5ldycpIGFuZCAhJHRhZy5maW5kKCdbbmFtZT10YWddJykudmFsKClcbiAgICAgICAgJHRhZy5yZW1vdmUoKVxuICAgICAgJHRhZy5yZW1vdmVDbGFzcyAndGFnbGEtdGFnLWFjdGl2ZSB0YWdsYS10YWctY2hvb3NlJ1xuICAgICAgIyR0YWcuZGF0YSgnZHJhZ2dhYmlsbHknKS5kaXNhYmxlKClcblxuICB1cGRhdGVEaWFsb2c6ICgkdGFnLCBkYXRhKSAtPlxuICAgIGh0bWwgPSAkKE11c3RhY2hlLnJlbmRlcihAdGFnVGVtcGxhdGUsIGRhdGEpKS5maW5kKCcudGFnbGEtZGlhbG9nJykuaHRtbCgpXG4gICAgJHRhZy5maW5kKCcudGFnbGEtZGlhbG9nJykuaHRtbChodG1sKVxuICAgICR0YWcuZGF0YSgndGFnLWRhdGEnLCBkYXRhKVxuXG4gIHVuZWRpdDogLT5cbiAgICByZXR1cm4gaWYgQGVkaXQgaXMgb2ZmXG4gICAgQGxvZyAndW5lZGl0KCkgaXMgZXhlY3V0ZWQnXG4gICAgJCgnLnRhZ2xhLXRhZycpLmVhY2ggLT4gQF9yZW1vdmVUb29scygkKEApKVxuICAgIEB3cmFwcGVyLnJlbW92ZUNsYXNzICd0YWdsYS1lZGl0aW5nJ1xuICAgIEBlZGl0b3IgPSBvZmZcblxuICAjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICAjIExpZmVjeWNsZSBNZXRob2RzXG4gICMjIyMjIyMjIyMjIyMjIyMjIyMjXG4gIGluaXQ6IChvcHRpb25zKSAtPlxuICAgICMgQ29uZmlndXJlIE9wdGlvbnNcbiAgICBAZGF0YSA9IG9wdGlvbnMuZGF0YSB8fCBbXVxuICAgIEBlZGl0b3IgPSAob3B0aW9ucy5lZGl0b3IgaXMgb24pID8gb24gOiBmYWxzZVxuICAgIEBmb3JtID0gaWYgb3B0aW9ucy5mb3JtIHRoZW4gJChvcHRpb25zLmZvcm0pIGVsc2UgVGFnbGEuRk9STV9URU1QTEFURVxuICAgIEB0YWdUZW1wbGF0ZSA9IGlmIG9wdGlvbnMudGFnVGVtcGxhdGUgdGhlbiAkKG9wdGlvbnMudGFnVGVtcGxhdGUpLmh0bWwoKSBlbHNlIFRhZ2xhLlRBR19URU1QTEFURVxuICAgIEB1bml0ID0gaWYgb3B0aW9ucy51bml0IGlzICdwZXJjZW50JyB0aGVuICdwZXJjZW50JyBlbHNlICdwaXhlbCdcbiAgICAjIEF0dHJpYnV0ZXNcbiAgICBAaW1hZ2VTaXplID0gbnVsbFxuICAgIEBpbWFnZSA9IEB3cmFwcGVyLmZpbmQoJ2ltZycpXG5cbiAgYmluZDogLT5cbiAgICBAbG9nICdiaW5kKCkgaXMgZXhlY3V0ZWQnXG4gICAgQHdyYXBwZXJcbiAgICAgIC5vbiAnbW91c2VlbnRlcicsICQucHJveHkoQGhhbmRsZU1vdXNlRW50ZXIsIEApXG4gICAgICAub24gJ2NsaWNrJywgJC5wcm94eShAaGFuZGxlV3JhcHBlckNsaWNrLCBAKVxuICAgICAgIy5vbiAnY2xpY2snLCAnLnRhZ2xhLXRhZycsICQucHJveHkoQGhhbmRsZVRhZ0NsaWNrLCBAKVxuICAgICAgLm9uICdjbGljaycsICcudGFnbGEtdGFnLWVkaXQtbGluaycsICQucHJveHkoQGhhbmRsZVRhZ0VkaXQsIEApXG4gICAgICAub24gJ2NsaWNrJywgJy50YWdsYS10YWctZGVsZXRlLWxpbmsnLCAkLnByb3h5KEBoYW5kbGVUYWdEZWxldGUsIEApXG5cbiAgcmVuZGVyRm46IChzdWNjZXNzLCBkYXRhKSAtPlxuICAgICMgU3RvcCBpZiBpbWFnZSBpcyBmYWlsZWQgdG8gbG9hZFxuICAgIHVubGVzcyBzdWNjZXNzXG4gICAgICBAbG9nKFwiRmFpbGVkIHRvIGxvYWQgaW1hZ2U6ICN7QGltYWdlLmF0dHIoJ3NyYycpfVwiLCAnZXJyb3InKVxuICAgICAgQGRlc3Ryb3koKVxuICAgICAgcmV0dXJuXG4gICAgIyBTYXZlIGRpbWVuc2lvblxuICAgIEBfdXBkYXRlSW1hZ2VTaXplKGRhdGEpXG4gICAgIyBBcHBseSBuZWNlc3NhcnkgY2xhc3MgbmFtZXNcbiAgICBAd3JhcHBlci5hZGRDbGFzcyAndGFnbGEnXG4gICAgQHdyYXBwZXIuYWRkQ2xhc3MgJ3RhZ2xhLWVkaXRpbmcnIGlmIEBlZGl0b3JcbiAgICAjIENyZWF0ZSB0YWdzXG4gICAgQGFkZFRhZyB0YWcgZm9yIHRhZyBpbiBAZGF0YVxuXG4gIHJlbmRlcjogLT5cbiAgICBAbG9nICdyZW5kZXIoKSBpcyBleGVjdXRlZCdcbiAgICBAaW1hZ2VTaXplID0gU3RhY2tsYS5nZXRJbWFnZVNpemUoQGltYWdlLCAkLnByb3h5KEByZW5kZXJGbiwgQCkpXG4gICAgQGltYWdlU2l6ZS5vbignY2hhbmdlJywgJC5wcm94eShAaGFuZGxlSW1hZ2VSZXNpemUsIEApKVxuXG4gIGRlc3Ryb3k6IC0+XG4gICAgQGxvZyAnZGVzdHJveSgpIGlzIGV4ZWN1dGVkJ1xuXG4kLmV4dGVuZChUYWdsYTo6LCBwcm90bylcblxud2luZG93LlN0YWNrbGEgPSB7fSB1bmxlc3Mgd2luZG93LlN0YWNrbGFcbndpbmRvdy5TdGFja2xhLlRhZ2xhID0gVGFnbGFcblxuIl19